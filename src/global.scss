/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
@import "@ionic/angular/css/palettes/dark.class.css";
/* @import "@ionic/angular/css/palettes/dark.system.css"; */

/* Noble Property Inspections Global Styles */

// Headers and Toolbars
ion-header {
  --background: transparent;

  ion-toolbar {
    --background: var(--noble-orange);
    --color: var(--noble-white);

    ion-title {
      color: var(--noble-white);
      font-weight: 600;
    }

    ion-buttons ion-button {
      --color: var(--noble-white);
    }
  }
}


// Mobile-only header styles (max-width: 767px)
@media (max-width: 767px) {
  ion-toolbar {
    --min-height: 56px !important;
    min-height: 56px !important;
  }

  ion-toolbar ion-title {
    font-size: 20px !important;
    font-weight: 600 !important;
    line-height: 1.2 !important;
  }
}

// Back Button with Orange Square - STATIC, no state changes
ion-back-button {
  --color: white !important;
  --background: var(--noble-orange) !important;
  --background-hover: var(--noble-orange) !important;
  --background-focused: var(--noble-orange) !important;
  --background-activated: var(--noble-orange) !important;
  --opacity: 1 !important;
  --opacity-hover: 1 !important;
  --opacity-focused: 1 !important;
  --opacity-activated: 1 !important;
  --border-radius: 4px;
  --icon-margin-start: 0;
  --icon-margin-end: 0;
  --icon-padding-start: 0;
  --icon-padding-end: 0;
  --padding-start: 0;
  --padding-end: 0;
  --min-width: 40px;
  --min-height: 40px;
  --ripple-color: transparent !important;
  margin-left: 8px;
  opacity: 1 !important;
  visibility: visible !important;
  transition: none !important;
  transform: none !important;

  &:hover, &:active, &:focus, &:focus-visible, &.ion-activated, &.ion-focused {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
    --background: var(--noble-orange) !important;
  }

  &::part(native) {
    background: var(--noble-orange) !important;
    border-radius: 4px;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1 !important;
    visibility: visible !important;
    transition: none !important;
    transform: none !important;

    &:hover, &:active, &:focus {
      background: var(--noble-orange) !important;
      opacity: 1 !important;
      visibility: visible !important;
      transform: none !important;
    }
  }

  &::part(icon) {
    color: white !important;
    font-size: 24px;
    opacity: 1 !important;
    visibility: visible !important;
  }
}

// Header buttons - STATIC, no state changes on click
ion-header ion-button,
ion-toolbar ion-button,
ion-buttons ion-button {
  --background-hover: var(--background) !important;
  --background-activated: var(--background) !important;
  --background-focused: var(--background) !important;
  --opacity: 1 !important;
  --opacity-hover: 1 !important;
  --opacity-activated: 1 !important;
  --opacity-focused: 1 !important;
  --ripple-color: transparent !important;
  opacity: 1 !important;
  visibility: visible !important;
  transition: none !important;
  transform: none !important;

  &:hover, &:active, &:focus, &:focus-visible, &.ion-activated, &.ion-focused {
    opacity: 1 !important;
    visibility: visible !important;
    transform: none !important;
  }

  &::part(native) {
    opacity: 1 !important;
    visibility: visible !important;
    transition: none !important;
    transform: none !important;

    &:hover, &:active, &:focus {
      opacity: 1 !important;
      visibility: visible !important;
      transform: none !important;
    }
  }
}

// Title - STATIC position, no movement on click
ion-title {
  transition: none !important;
  position: absolute !important;
  top: 50% !important;
  transform: translateY(-50%) !important;

  &:hover, &:active, &:focus {
    transform: translateY(-50%) !important;
  }
}

// Tab Bar (Footer)
ion-tab-bar {
  --background: var(--noble-white);
  border-top: 1px solid #E0E0E0;

  ion-tab-button {
    --color: var(--noble-gray);
    --color-selected: var(--noble-orange);

    &.tab-selected {
      ion-icon, ion-label {
        color: var(--noble-orange);
      }
    }
  }
}

// Mobile-only footer styles (max-width: 767px)
@media (max-width: 767px) {
  ion-tab-bar {
    --min-height: 60px !important;
    min-height: 60px !important;
  }
}

// Buttons
ion-button {
  &.button-solid {
    --background: var(--noble-orange);
    --background-hover: var(--ion-color-primary-shade);
    --background-activated: var(--ion-color-primary-shade);
    --color: var(--noble-white);
  }
  
  &.button-outline {
    --border-color: var(--noble-orange);
    --color: var(--noble-orange);
    --color-hover: var(--noble-white);
    --background-hover: var(--noble-orange);
  }
  
  &.button-clear {
    --color: var(--noble-orange);
  }
}

// Cards
ion-card {
  --background: var(--noble-white);
  border: 1px solid #E0E0E0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  
  ion-card-header {
    background-color: var(--noble-light-gray);
    border-bottom: 1px solid #E0E0E0;
    
    ion-card-title {
      color: var(--noble-dark-gray);
      font-weight: 600;
    }
  }
}

// Lists
ion-list {
  ion-item {
    --background: var(--noble-white);
    --color: var(--noble-dark-gray);
    --border-color: #E0E0E0;
    
    &:hover {
      --background: var(--noble-light-gray);
    }
  }
}

// Segments
ion-segment {
  --background: var(--noble-light-gray);
  
  ion-segment-button {
    --color: var(--noble-gray);
    --color-checked: var(--noble-white);
    --background-checked: var(--noble-orange);
    --indicator-color: var(--noble-orange);
  }
}

// FAB Buttons
ion-fab-button {
  --background: var(--noble-orange);
  --background-hover: var(--ion-color-primary-shade);
  --background-activated: var(--ion-color-primary-shade);
  --color: var(--noble-white);
}

// Badges
ion-badge {
  --background: var(--noble-orange);
  --color: var(--noble-white);
  
  &.badge-secondary {
    --background: var(--noble-gray);
    --color: var(--noble-white);
  }
}

// Chips
ion-chip {
  --background: var(--noble-light-gray);
  --color: var(--noble-dark-gray);
  border: 1px solid #E0E0E0;
  
  &.chip-primary {
    --background: var(--noble-orange);
    --color: var(--noble-white);
  }
}

// Toggles and Checkboxes
ion-toggle {
  --background-checked: var(--noble-orange);
  --handle-background-checked: var(--noble-white);
}

ion-checkbox {
  --background-checked: var(--noble-orange);
  --border-color-checked: var(--noble-orange);
  --checkmark-color: var(--noble-white);
}

// Loading and Toasts
ion-loading {
  --spinner-color: var(--noble-orange);
}

ion-toast {
  --button-color: var(--noble-orange);

  // Success toast uses app theme color (orange) instead of green
  &[color="success"] {
    --background: var(--noble-orange, #F15A27);
    --color: white;
  }

  &.toast-success {
    --background: var(--noble-orange, #F15A27);
    --color: white;
  }

  &.toast-warning {
    --background: var(--noble-orange);
    --color: white;
  }

  &.toast-danger {
    --background: #dc3545;
    --color: white;
  }

  // Image diagnostics toast - monospace font for aligned display
  &.image-diagnostics-toast {
    --background: rgba(0, 0, 0, 0.9);
    --color: white;
    --min-width: 300px;
    --max-width: 400px;

    .toast-message {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.5;
      white-space: pre-line;
    }
  }
}

// Action Sheet
ion-action-sheet {
  .action-sheet-button {
    color: #000 !important; // Black text for all action sheet options

    &.action-sheet-destructive {
      color: var(--ion-color-danger);
    }
  }
}

// Room Selection Action Sheet - No hover/touch highlighting on mobile
.room-selection-sheet {
  .action-sheet-group {
    .action-sheet-button {
      // Disable all transitions
      transition: none !important;

      // Remove tap highlight
      -webkit-tap-highlight-color: transparent !important;

      // Ensure static appearance on all states
      &,
      &:hover,
      &:active,
      &:focus,
      &:focus-visible {
        background: transparent !important;
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
        outline: none !important;
      }

      // Mobile-specific - no hover background on touch
      @media (hover: none), (pointer: coarse) {
        &:hover,
        &:active,
        &:focus,
        &.activated,
        &.ion-activated,
        &[aria-pressed="true"] {
          background: transparent !important;
          color: #000 !important;
        }
      }
    }
  }
}

// ============================================================================
// CRITICAL: Input and Textarea cursor color - BLACK CURSOR EVERYWHERE
// ============================================================================

// Target Ionic components
ion-input {
  caret-color: #000 !important;
  --color: #333 !important;
  --highlight-color-focused: #000 !important;
  --highlight-color-valid: #000 !important;
  --highlight-color-invalid: #000 !important;
}

// Target native input elements inside ion-input with maximum specificity
input,
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="search"],
input[type="url"],
ion-input input,
ion-input input[type="text"],
ion-input input[type="email"],
ion-input input[type="password"],
ion-input input[type="number"],
ion-input input[type="tel"],
ion-input input[type="search"],
ion-input input[type="url"] {
  caret-color: #000 !important;
  color: #333 !important;
}

// Target shadow DOM parts (Ionic uses shadow DOM)
ion-input::part(native) {
  caret-color: #000 !important;
}

// Override any webkit/browser defaults for cursor color
input::-webkit-input-placeholder {
  caret-color: #000 !important;
}

input:focus,
input:focus-visible {
  caret-color: #000 !important;
}

ion-textarea {
  caret-color: #000 !important;
  --color: #000 !important;
  --highlight-color-focused: #000 !important;
  --highlight-color-valid: #000 !important;
  --highlight-color-invalid: #000 !important;
}

// Target native textarea element
ion-textarea textarea {
  caret-color: #000 !important;
  color: #333 !important;
}

ion-textarea::part(native) {
  caret-color: #000 !important;
}

// Photo Source Action Sheet (iOS Style)
.photo-source-sheet {
  .action-sheet-wrapper {
    .action-sheet-container {
      .action-sheet-group {
        .action-sheet-button {
          color: var(--noble-orange) !important;
          font-weight: 400;
          
          &.action-sheet-cancel {
            font-weight: 600;
          }
          
          .action-sheet-button-inner {
            justify-content: flex-start;
            
            .action-sheet-icon {
              color: var(--noble-gray);
              margin-right: 16px;
            }
          }
        }
      }
    }
  }
}

// PDF Preview Modal
ion-modal.fullscreen-modal {
  --width: 100% !important;
  --height: 100% !important;
  --max-width: 100% !important;
  --max-height: 100% !important;
  --border-radius: 0 !important;
}

ion-modal.fullscreen-modal::part(content) {
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  max-height: 100% !important;
  border-radius: 0 !important;
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
}

// Compact Photo Viewer Modal
.compact-photo-modal {
  --width: 70%;
  --height: 70%;
  --max-width: 900px;
  --max-height: 700px;
  --border-radius: 8px;

  .modal-wrapper {
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
    border: 3px solid #d0d0d0;
  }

  // Mobile responsive
  @media (max-width: 768px) {
    --width: 85%;
    --height: 60%;
    --max-width: 100%;
  }
}

// Compact Photo Selector Alert
.compact-photo-selector {
  .alert-wrapper {
    .alert-button-group {
      padding: 0;
      
      .alert-button {
        height: 44px;
        justify-content: center;
        border-bottom: 0.55px solid rgba(0, 0, 0, 0.1);
        
        &.action-button {
          color: var(--noble-orange) !important;
          font-weight: 400;
          
          .alert-button-inner {
            justify-content: center;
            color: var(--noble-orange) !important;
          }
        }
        
        &.done-button {
          color: var(--noble-orange) !important;
          font-weight: 600;
          
          .alert-button-inner {
            justify-content: center;
            color: var(--noble-orange) !important;
          }
        }
        
        &:last-child {
          border-bottom: none;
        }
      }
    }
    
    .alert-head {
      display: none;
    }
    
    .alert-message {
      display: none;
    }
  }
}

// Custom utility classes
.text-orange {
  color: var(--noble-orange) !important;
}

.text-gray {
  color: var(--noble-gray) !important;
}

.bg-orange {
  background-color: var(--noble-orange) !important;
}

.bg-gray {
  background-color: var(--noble-gray) !important;
}

/* Performance Optimization: Lazy Loading for Images */
img {
  loading: lazy;
  content-visibility: auto;
  contain-intrinsic-size: 200px 200px; /* Helps with layout shift */
}

/* Optimize image rendering */
img[loading="lazy"] {
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

img[loading="lazy"].loaded {
  opacity: 1;
}

/* Prevent layout shift during image loading */
.image-container {
  min-height: 200px;
  background-color: #f5f5f5;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* -----------------------------------------------------
 * Dark theme overrides
 * ----------------------------------------------------- */
body.dark-theme {
  background-color: var(--ion-background-color);
  color: var(--ion-text-color);
}

body.dark-theme ion-app,
body.dark-theme ion-content {
  --background: var(--ion-background-color);
  color: var(--ion-text-color);
}

body.dark-theme ion-header {
  ion-toolbar {
    --background: var(--ion-toolbar-background);
    --color: var(--ion-toolbar-color);

    ion-title {
      color: var(--ion-toolbar-color);
    }

    ion-buttons ion-button {
      --color: var(--ion-toolbar-color);
    }
  }
}

body.dark-theme ion-tab-bar {
  --background: var(--ion-tab-bar-background);
  border-top: 1px solid var(--ion-border-color);

  ion-tab-button {
    --color: #cfcfcf;
    --color-selected: var(--ion-tab-bar-color-selected);

    &.tab-selected {
      ion-icon,
      ion-label {
        color: var(--ion-tab-bar-color-selected);
      }
    }
  }
}

body.dark-theme ion-card {
  --background: var(--ion-card-background);
  border: 1px solid var(--ion-border-color);
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);

  ion-card-header {
    background: rgba(255, 255, 255, 0.04);
    border-bottom: 1px solid var(--ion-border-color);

    ion-card-title {
      color: var(--ion-text-color);
    }
  }
}

body.dark-theme ion-list ion-item {
  --background: var(--ion-item-background);
  --color: var(--ion-text-color);
  --border-color: var(--ion-border-color);

  &:hover {
    --background: rgba(255, 255, 255, 0.04);
  }
}

body.dark-theme ion-item-divider {
  --background: rgba(255, 255, 255, 0.04);
  --color: var(--ion-text-color);
  border-color: var(--ion-border-color);
}

body.dark-theme ion-input,
body.dark-theme ion-textarea {
  --background: #1f1f1f;
  --color: var(--ion-text-color);
  --placeholder-color: var(--ion-placeholder-color);
  --border-color: var(--ion-border-color);
}

body.dark-theme input,
body.dark-theme select,
body.dark-theme textarea {
  background-color: #1f1f1f;
  color: var(--ion-text-color);
  border: 1px solid var(--ion-border-color);
}

body.dark-theme input::placeholder,
body.dark-theme textarea::placeholder {
  color: var(--ion-placeholder-color);
}

body.dark-theme .info-section,
body.dark-theme .section-card,
body.dark-theme .document-card,
body.dark-theme .service-item,
body.dark-theme .performed-service-item,
body.dark-theme .services-table,
body.dark-theme .services-table .table-row,
body.dark-theme .services-table .table-header,
body.dark-theme .templates-container .template-bar,
body.dark-theme .room-section,
body.dark-theme .template-card,
body.dark-theme .help-card,
body.dark-theme .project-container .info-section,
body.dark-theme .room-section-delimiter {
  background: #181818;
  border-color: var(--ion-border-color);
  color: var(--ion-text-color);
}

body.dark-theme .services-table .table-header {
  background: #202020;
  color: #d1d1d1;
}

body.dark-theme .services-table .table-row:hover {
  background: rgba(255, 255, 255, 0.05);
}

body.dark-theme .service-item {
  background: #1d1d1d;
}

body.dark-theme .services-performed-list .performed-service-item {
  background: #1d1d1d;
  border-color: var(--ion-border-color);
}

body.dark-theme .no-services-performed p,
body.dark-theme .info-section .info-label {
  color: #c6c6c6;
}

body.dark-theme .info-section .info-value,
body.dark-theme .info-section h3,
body.dark-theme .info-section .section-title,
body.dark-theme h1,
body.dark-theme h2,
body.dark-theme h3,
body.dark-theme h4,
body.dark-theme h5,
body.dark-theme h6,
body.dark-theme p,
body.dark-theme span,
body.dark-theme label {
  color: var(--ion-text-color);
}

body.dark-theme .template-content {
  .template-name,
  .template-status {
    color: var(--ion-text-color);
  }
}

body.dark-theme .templates-container .template-progress {
  background: rgba(241, 90, 39, 0.28);
}

body.dark-theme ion-badge {
  --color: #121212;
}

body.dark-theme ion-modal {
  --ion-background-color: #1c1c1c;
}

body.dark-theme ion-toast {
  --background: #2b2b2b;
  --color: var(--ion-text-color);
}

body.dark-theme .modal-wrapper,
body.dark-theme .alert-wrapper,
body.dark-theme .popover-content {
  background: #1c1c1c !important;
  color: var(--ion-text-color) !important;
  border-color: var(--ion-border-color) !important;
}

body.dark-theme .modal-wrapper ion-button,
body.dark-theme .alert-button,
body.dark-theme .popover-content ion-item,
body.dark-theme .popover-content ion-label {
  color: var(--ion-text-color);
}

/* Dark theme: Skeleton loaders */
body.dark-theme .skeleton-image,
body.dark-theme .skeleton-line,
body.dark-theme .skeleton-id,
body.dark-theme .skeleton-arrow {
  background: linear-gradient(90deg, var(--color-skeleton-base) 25%, var(--color-skeleton-shine) 50%, var(--color-skeleton-base) 75%);
  background-size: 200% 100%;
}

body.dark-theme .project-image.loading::after {
  background: linear-gradient(90deg, var(--color-skeleton-base) 25%, var(--color-skeleton-shine) 50%, var(--color-skeleton-base) 75%);
  background-size: 200% 100%;
}

/* Dark theme: Search container */
body.dark-theme .search-container {
  background: transparent;
  box-shadow: none;
}

body.dark-theme .search-container .enhanced-search-bar {
  --background: var(--color-bg-inset);
  --placeholder-color: var(--color-text-muted);
  --icon-color: var(--color-text-muted);
}

/* Dark theme: Toolbar */
body.dark-theme ion-toolbar.action-toolbar {
  --background: var(--ion-toolbar-background, #1E1E1E);
}

/* Dark theme: Toolbar buttons */
body.dark-theme .toolbar-btn {
  background: transparent;
}

/* Dark theme: Settings pane */
body.dark-theme .settings-pane {
  background: var(--color-bg-card);
  box-shadow: 2px 0 12px var(--color-shadow-heavy);
}

body.dark-theme .settings-pane-header {
  border-bottom-color: var(--color-border-default);
}

body.dark-theme .settings-group .settings-group-title {
  border-bottom-color: var(--color-border-light);
}

body.dark-theme .settings-group .settings-group-title ion-icon,
body.dark-theme .settings-group .settings-group-title span {
  color: var(--color-text-secondary);
}

body.dark-theme .settings-row .settings-row-label {
  color: var(--color-text-primary);
}

body.dark-theme .settings-row .settings-row-desc {
  color: var(--color-text-muted);
}

body.dark-theme .settings-row ion-toggle {
  --track-background: #555;
}

/* Dark theme: Styled inputs */
body.dark-theme .styled-input {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border-color: var(--color-border-default);
}

body.dark-theme .styled-input::placeholder {
  color: var(--color-text-muted);
}

body.dark-theme select.styled-input {
  background-color: var(--color-bg-elevated);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23F15A27' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
}

/* Dark theme: Alerts */
body.dark-theme .custom-other-alert .alert-wrapper,
body.dark-theme .custom-document-alert .alert-wrapper,
body.dark-theme .template-loading-alert .alert-wrapper {
  background: var(--color-bg-card);
  box-shadow: 0 22px 60px var(--color-shadow-heavy);
}

body.dark-theme .custom-other-alert .alert-title,
body.dark-theme .custom-document-alert .alert-title,
body.dark-theme .template-loading-alert .alert-title {
  color: var(--color-text-primary);
}

body.dark-theme .custom-other-alert .alert-message,
body.dark-theme .custom-document-alert .alert-message,
body.dark-theme .template-loading-alert .alert-message {
  color: var(--color-text-secondary);
}

body.dark-theme .custom-other-alert .alert-input,
body.dark-theme .custom-document-alert .alert-input {
  background: var(--color-bg-elevated);
  color: var(--color-text-primary);
  border-color: var(--color-border-default);
}

/* Dark theme: Universal alert button override (specificity 0,4,2 beats light-mode 0,4,0) */
body.dark-theme ion-alert .alert-button-group .alert-button:not(.editor-save-btn) {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
}

/* Dark theme: Alert button interactive states (specificity 0,5,2 beats light-mode 0,5,0) */
body.dark-theme ion-alert .alert-button-group .alert-button:not(.editor-save-btn):hover,
body.dark-theme ion-alert .alert-button-group .alert-button:not(.editor-save-btn):active,
body.dark-theme ion-alert .alert-button-group .alert-button:not(.editor-save-btn):focus,
body.dark-theme ion-alert .alert-button-group .alert-button:not(.editor-save-btn):focus-visible {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Dark theme: Image container */
body.dark-theme .image-container {
  background-color: var(--color-bg-inset);
}

/* Dark theme: Empty state */
body.dark-theme .empty-state {
  background: var(--color-bg-card);
  box-shadow: 0 2px 8px var(--color-shadow);
}

body.dark-theme .empty-state h3 {
  color: var(--color-text-primary);
}

/* Dark theme: Progress bars */
body.dark-theme .progress-bar-wrapper {
  background: var(--color-bg-inset);
}

body.dark-theme .upload-progress-container {
  background: var(--color-bg-card);
  border-color: var(--color-border-default);
}

body.dark-theme .upload-progress-item {
  background: var(--color-bg-elevated);
  border-color: var(--color-border-default);
}

body.dark-theme .upload-progress-bar {
  background: var(--color-bg-inset);
}

/* Dark theme: Page tab bar (project-detail, new-project) */
body.dark-theme ion-tab-bar.page-tab-bar {
  --background: var(--ion-tab-bar-background);
  border-top-color: var(--color-border-default);
}

/* Dark theme: Validation */
body.dark-theme .validation-error {
  background: rgba(255, 94, 115, 0.12);
  color: var(--color-status-danger);
}

/* Dark theme: ion-searchbar */
body.dark-theme ion-searchbar {
  --background: var(--color-bg-inset);
  --color: var(--color-text-primary);
  --placeholder-color: var(--color-text-muted);
  --icon-color: var(--color-text-muted);
}

/* Dark theme: ion-toggle (inside settings) */
body.dark-theme ion-toggle {
  --track-background: #444;
}

/* Dark theme: Cursor color for dark inputs */
body.dark-theme input,
body.dark-theme textarea {
  caret-color: var(--color-text-primary) !important;
}

body.dark-theme ion-input,
body.dark-theme ion-textarea {
  caret-color: var(--color-text-primary) !important;
  --color: var(--color-text-primary) !important;
}

body.dark-theme ion-input::part(native),
body.dark-theme ion-textarea::part(native) {
  caret-color: var(--color-text-primary) !important;
}

/* Dark theme: Action sheet buttons */
body.dark-theme ion-action-sheet .action-sheet-group {
  background: var(--color-bg-card);
}

body.dark-theme ion-action-sheet .action-sheet-button {
  color: var(--color-text-primary) !important;
}

body.dark-theme ion-action-sheet .action-sheet-button.action-sheet-destructive {
  color: var(--ion-color-danger) !important;
}

body.dark-theme .room-selection-sheet .action-sheet-group .action-sheet-button {
  color: var(--color-text-primary) !important;

  &:hover, &:active, &:focus, &.activated, &.ion-activated {
    color: var(--color-text-primary) !important;
  }
}

body.dark-theme .photo-source-sheet .action-sheet-button {
  color: var(--noble-orange) !important;
}

.custom-other-alert {
  --backdrop-opacity: 0.55;

  .alert-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 24px 0 12px;
    min-width: min(380px, 90vw);
  }

  .alert-head {
    padding: 8px 24px 16px;

    .alert-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: #333333;
      text-align: center;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 0 24px 16px;
    color: #666666;
    font-size: 15px;
    text-align: center;
    line-height: 1.4;
  }

  .alert-input-group {
    padding: 0 24px 20px;

    .alert-input {
      border-radius: 8px;
      border: 1px solid #ddd;
      padding: 14px 16px;
      font-size: 16px;
      background: #fff;
      color: #333;
      transition: border-color 0.2s ease;

      &:focus {
        outline: none;
        border-color: #999;
      }

      &::placeholder {
        color: #999;
      }
    }
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    gap: 12px;
    justify-content: stretch;
    display: flex;

    .alert-button {
      flex: 1 1 0;
      font-weight: 600;
      letter-spacing: 0.05em;
      border-radius: 8px;
      border: none;
      padding: 13px 0;
      text-transform: uppercase;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      // Cancel button styling
      &[role="cancel"] {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }

      // Action button styling
      &:not([role="cancel"]) {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }
    }
  }
}

.bg-light-gray {
  background-color: var(--noble-light-gray) !important;
}

.border-orange {
  border-color: var(--noble-orange) !important;
}

.border-gray {
  border-color: var(--noble-gray) !important;
}

/* Global Styled Input - Standardized Dropdown and Input Styling */
.styled-input {
  width: 100%;
  padding: 12px;
  border: 2px solid #e1e8ed;
  border-radius: 8px;
  font-size: 15px;
  background: white;

  &:focus {
    outline: none;
  }

  &::placeholder {
    color: #a0aec0;
  }
}

select.styled-input {
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23F15A27' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 32px;
  cursor: pointer;
}

textarea.styled-input {
  resize: vertical;
  min-height: 100px;
}

/* Sleek template loading alert */
.template-loading-alert {
  --backdrop-opacity: 0.55;
  --ion-text-color: var(--noble-dark-gray, #333333);
}

.template-loading-alert .alert-wrapper {
  background: #ffffff;
  border-radius: 18px;
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
  min-width: min(380px, 90vw);
  padding: 24px 0 12px;
}

.template-loading-alert .alert-head {
  text-align: center;
  padding: 8px 24px 16px;
  border-bottom: none;
}

.template-loading-alert .alert-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #333333;
  letter-spacing: 0.01em;
}

.template-loading-alert .alert-head::after {
  content: '';
  display: block;
  width: 54px;
  height: 54px;
  margin: 18px auto 4px;
  border-radius: 50%;
  border: 3px solid rgba(241, 90, 39, 0.18);
  border-top-color: var(--noble-orange, #F15A27);
  border-right-color: rgba(241, 90, 39, 0.45);
  animation: template-loading-spin 0.9s linear infinite;
}

.template-loading-alert .alert-message {
  padding: 0 24px 16px;
  color: #666666;
  font-size: 15px;
  text-align: center;
  line-height: 1.4;
}

@keyframes template-loading-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}


.template-loading-alert .alert-button-group {
  padding: 12px 24px 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
}

.template-loading-alert .alert-button {
  flex: 1 1 0;
  min-width: 140px;
  width: auto;
  display: inline-flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  padding: 13px 18px;
  font-size: 14px;
  transition: all 0.2s ease;
}

.template-loading-alert .alert-button .alert-button-inner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.template-loading-alert .alert-button[role="cancel"] {
  color: #333;
  background: #f5f5f5;
  border: 2px solid var(--noble-orange, #F15A27);
}

.template-loading-alert .alert-button:not([role="cancel"]) {
  color: #333;
  background: #f5f5f5;
  border: 2px solid var(--noble-orange, #F15A27);
}

// Custom Document Alert - Matching theme
.custom-document-alert {
  --backdrop-opacity: 0.55;

  .alert-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 24px 0 12px;
    min-width: min(380px, 90vw);
  }

  .alert-head {
    padding: 8px 24px 16px;

    .alert-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: #333333;
      text-align: center;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 0 24px 16px;
    color: #666666;
    font-size: 15px;
    text-align: center;
    line-height: 1.4;
  }

  .alert-input-group {
    padding: 0 24px 20px;

    .alert-input {
      border-radius: 8px;
      border: 1px solid #ddd;
      padding: 14px 16px;
      font-size: 16px;
      background: #fff;
      color: #333;
      transition: border-color 0.2s ease;

      &:focus {
        outline: none;
        border-color: #999;
      }

      &::placeholder {
        color: #999;
      }
    }
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    gap: 12px;
    justify-content: stretch;
    display: flex;

    .alert-button {
      flex: 1 1 0;
      font-weight: 600;
      letter-spacing: 0.05em;
      border-radius: 8px;
      border: none;
      padding: 13px 0;
      text-transform: uppercase;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      // Cancel button styling - same orange border as action buttons
      &[role="cancel"] {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27) !important;

        &:hover, &:active, &:focus {
          color: #333 !important;
          background: #f5f5f5 !important;
          border-color: var(--noble-orange, #F15A27) !important;
        }
      }

      // Action button styling (Replace Document)
      &:not([role="cancel"]) {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27) !important;

        &:hover, &:active, &:focus {
          color: #333 !important;
          background: #f5f5f5 !important;
          border-color: var(--noble-orange, #F15A27) !important;
        }
      }

      &.alert-button-cancel {
        color: #333 !important;
        background: #e8e8e8 !important;

        &:hover, &:active, &:focus {
          color: #333 !important;
          background: #e8e8e8 !important;
        }
      }

      &.alert-button-save {
        color: #333 !important;
        background: #e8e8e8 !important;

        &:hover, &:active, &:focus {
          color: #333 !important;
          background: #e8e8e8 !important;
        }
      }
    }
  }

  // Validation error styling for add point dialog
  &.add-point-error {
    .alert-message {
      padding: 0 24px 12px;
      text-align: left;
      color: #dc3545;
      font-size: 13px;
      font-weight: 500;
    }
  }

  // Edit address modal styling
  &.edit-address-alert {
    .alert-wrapper {
      min-width: min(400px, 90vw);
    }

    .alert-message {
      padding: 0 24px 16px;
      max-height: none;
      overflow: visible;
    }

    .edit-address-form {
      .form-field {
        margin-bottom: 12px;

        label {
          display: block;
          font-size: 12px;
          font-weight: 600;
          color: #666;
          margin-bottom: 4px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        input, select {
          width: 100%;
          padding: 10px 12px;
          border: 1px solid #ddd !important;
          border-radius: 6px;
          font-size: 16px; // Prevents iOS zoom on focus
          color: #333 !important;
          background-color: #fff !important;
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
          transition: border-color 0.2s, background-color 0.2s;

          &:focus {
            outline: none;
            border-color: #F15A27 !important;
            background-color: #fff !important;
          }

          &::placeholder {
            color: #999;
          }
        }

        select {
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
          background-repeat: no-repeat !important;
          background-position: right 12px center !important;
          padding-right: 32px;
          cursor: pointer;
        }
      }
    }
  }

  // G2-UX-004: Confirmation dialog enhancements (web only)
  &.confirmation-dialog {
    .alert-button {
      // Confirm/Action button - static orange border, no hover change
      &.alert-button-confirm {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27) !important;

        &:hover, &:active, &:focus, &:focus-visible {
          color: #333 !important;
          background: #f5f5f5 !important;
          border-color: var(--noble-orange, #F15A27) !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }

      // Destructive button styling - same as confirm button
      &.alert-button-destructive {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27) !important;

        &:hover, &:active, &:focus, &:focus-visible {
          color: #333 !important;
          background: #f5f5f5 !important;
          border-color: var(--noble-orange, #F15A27) !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }

      // Cancel button - same orange border as action buttons
      &.alert-button-cancel {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27) !important;

        &:hover, &:active, &:focus, &:focus-visible {
          color: #333 !important;
          background: #f5f5f5 !important;
          border-color: var(--noble-orange, #F15A27) !important;
          outline: none !important;
          box-shadow: none !important;
        }
      }
    }
  }
}

// Payment Method Alert - Two buttons on top row, cancel full width below
ion-alert.payment-method-alert {
  .alert-wrapper {
    min-width: min(440px, 90vw) !important;
  }

  .alert-button-group,
  .alert-button-group.alert-button-group-vertical {
    flex-direction: row !important;
    flex-wrap: wrap !important;
    padding: 12px 24px 20px !important;
    gap: 12px !important;
  }

  .alert-button-group .alert-button.alert-button-confirm {
    flex: 1 1 40% !important;
    letter-spacing: 0 !important;
    font-size: 13px !important;
    padding: 13px 8px !important;
    text-align: center !important;
  }

  .alert-button-group .alert-button.alert-button-cancel {
    flex: 0 0 100% !important;
  }
}

/* Dark theme: Payment Method Alert */
body.dark-theme ion-alert.payment-method-alert .alert-wrapper {
  background: var(--color-bg-card) !important;
  box-shadow: 0 22px 60px var(--color-shadow-heavy);
}

body.dark-theme ion-alert.payment-method-alert .alert-title {
  color: var(--color-text-primary);
}

body.dark-theme ion-alert.payment-method-alert .alert-message {
  color: var(--color-text-secondary);
}

body.dark-theme ion-alert.payment-method-alert .alert-button {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
}

// Global override - Disable ALL hover effects on alert buttons (webapp only)
@media (hover: hover) {
  ion-alert .alert-button:hover {
    // Force same styling on hover - prevent any background/border changes
    transform: none !important;
    box-shadow: none !important;
    filter: none !important;
    opacity: 1 !important;
  }

  // Specifically target action buttons to maintain orange border on hover
  ion-alert .alert-button:not([role="cancel"]):hover {
    background: #f5f5f5 !important;
    color: #333 !important;
    border-color: var(--noble-orange, #F15A27) !important;
  }

  // Cancel buttons maintain same orange border on hover
  ion-alert .alert-button[role="cancel"]:hover {
    background: #f5f5f5 !important;
    color: #333 !important;
    border-color: var(--noble-orange, #F15A27) !important;
  }

}

// Link URL Alert - for displaying external links on mobile
.link-url-alert {
  --backdrop-opacity: 0.55;

  .alert-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 24px 0 12px;
    min-width: min(380px, 90vw);
    max-width: 420px;
  }

  .alert-head {
    padding: 8px 24px 16px;

    .alert-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: #333333;
      text-align: center;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 0 24px 20px;
    color: #0066cc;
    font-size: 14px;
    text-align: center;
    line-height: 1.6;
    word-break: break-all;
    white-space: pre-line;
    background: #f8f9fa;
    margin: 0 16px;
    padding: 16px;
    border-radius: 8px;
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    gap: 10px;
    justify-content: stretch;
    display: flex;
    flex-wrap: wrap;

    .alert-button {
      flex: 1 1 calc(50% - 5px);
      min-width: 100px;
      font-weight: 600;
      letter-spacing: 0.03em;
      border-radius: 8px;
      border: none;
      padding: 12px 16px;
      text-transform: uppercase;
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;

      // Cancel/Close button - same orange border as action buttons
      &[role="cancel"] {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }

      // Action buttons (Copy, Open)
      &:not([role="cancel"]) {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }
    }
  }
}

/* Dark theme: Link URL Alert */
body.dark-theme .link-url-alert .alert-wrapper {
  background: var(--color-bg-card);
  box-shadow: 0 22px 60px var(--color-shadow-heavy);
}

body.dark-theme .link-url-alert .alert-title {
  color: var(--color-text-primary);
}

body.dark-theme .link-url-alert .alert-message {
  background: var(--color-bg-elevated);
  color: #66b3ff;
}

body.dark-theme .link-url-alert .alert-button {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
}

// Custom Loading Popup - styled to match other popups
.custom-loading-popup {
  --backdrop-opacity: 0.55;

  .loading-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 32px 40px;
    min-width: min(320px, 85vw);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
  }

  .loading-spinner {
    --color: var(--noble-orange, #F15A27);
  }

  ion-spinner {
    color: var(--noble-orange, #F15A27);
    width: 36px;
    height: 36px;
  }

  .loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    text-align: center;
  }

  .loading-message {
    font-size: 15px;
    font-weight: 500;
    color: #333333;
    line-height: 1.4;
    text-align: center;
  }
}

/* Dark theme: Custom Loading Popup */
body.dark-theme .custom-loading-popup .loading-wrapper {
  background: var(--color-bg-card) !important;
}

body.dark-theme .custom-loading-popup .loading-message {
  color: var(--color-text-primary) !important;
}

// Edit Address Alert - styled to match confirmation dialog theme
.edit-address-alert {
  --backdrop-opacity: 0.55;

  .alert-wrapper {
    background: #ffffff !important;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 24px 0 12px;
    min-width: min(420px, 90vw);
    max-width: 480px;
  }

  .alert-head {
    padding: 8px 24px 20px;
    border-bottom: 1px solid #eee;

    .alert-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: #333333 !important;
      text-align: center;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 20px 24px 16px;
    max-height: none;
    overflow: visible;
  }

  .edit-address-form {
    .form-field {
      margin-bottom: 16px;

      &:last-child {
        margin-bottom: 8px;
      }

      label {
        display: block;
        font-size: 13px;
        font-weight: 600;
        color: #555 !important;
        margin-bottom: 6px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      input, select {
        width: 100%;
        padding: 12px 14px;
        border: 2px solid #e0e0e0 !important;
        border-radius: 10px;
        font-size: 16px;
        color: #333 !important;
        background-color: #fafafa !important;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        transition: all 0.2s ease;
        box-sizing: border-box;

        &:focus {
          outline: none;
          border-color: var(--noble-orange, #F15A27) !important;
          background-color: #ffffff !important;
          box-shadow: 0 0 0 3px rgba(241, 90, 39, 0.1);
        }

        &::placeholder {
          color: #999;
        }
      }

      select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
        background-repeat: no-repeat !important;
        background-position: right 14px center !important;
        background-color: #fafafa !important;
        padding-right: 36px;
        cursor: pointer;

        &:focus {
          background-color: #ffffff !important;
        }
      }
    }
  }

  .alert-button-group {
    padding: 16px 24px 20px;
    gap: 12px;
    justify-content: stretch;
    display: flex;
    border-top: 1px solid #eee;

    .alert-button {
      flex: 1 1 0;
      font-weight: 600;
      letter-spacing: 0.03em;
      border-radius: 8px;
      border: none;
      padding: 14px 0;
      text-transform: uppercase;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      cursor: pointer;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      // Cancel button styling - same orange border as action buttons
      &[role="cancel"] {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27);
      }

      // Save button styling - same as cancel for consistency
      &:not([role="cancel"]) {
        color: #333 !important;
        background: #f5f5f5 !important;
        border: 2px solid var(--noble-orange, #F15A27);
      }
    }
  }

  // Dark mode support
  body.dark-theme & {
    .alert-wrapper {
      background: #2a2a2a !important;
    }

    .alert-head {
      border-bottom-color: #444;

      .alert-title {
        color: #ffffff !important;
      }
    }

    .alert-message {
      .edit-address-form {
        .form-field {
          label {
            color: #aaa !important;
          }

          input, select {
            background-color: #333 !important;
            border-color: #555 !important;
            color: #fff !important;

            &:focus {
              background-color: #3a3a3a !important;
            }

            &::placeholder {
              color: #888;
            }
          }

          select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23aaa' d='M6 9L1 4h10z'/%3E%3C/svg%3E") !important;
            background-repeat: no-repeat !important;
            background-position: right 14px center !important;
            background-color: #333 !important;

            &:focus {
              background-color: #3a3a3a !important;
            }
          }
        }
      }
    }

    .alert-button-group {
      border-top-color: #444;

      .alert-button {
        &[role="cancel"] {
          color: #ddd !important;
          background: #444 !important;
          border-color: var(--noble-orange, #F15A27);
        }

        &:not([role="cancel"]) {
          color: #ddd !important;
          background: #444 !important;
          border-color: var(--noble-orange, #F15A27);
        }
      }
    }
  }
}

// Zelle Information Alert - matches app popup style
.zelle-info-alert {
  --backdrop-opacity: 0.55;

  .alert-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
    padding: 24px 0 12px;
    min-width: min(380px, 90vw);
  }

  .alert-head {
    padding: 8px 24px 16px;

    .alert-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: #333333;
      text-align: center;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 0 24px 20px;
    color: #666666;
    font-size: 15px;
    line-height: 1.5;

    .zelle-details {
      color: #666666;
      font-size: 15px;
      line-height: 1.5;
      margin-bottom: 20px;
      text-align: center;
    }

    .zelle-pay-to {
      font-size: 1.05rem;
      font-weight: 600;
      color: #333333;
      margin: 20px 0 14px;
      text-align: left;
      padding-bottom: 8px;
      border-bottom: 2px solid #e8e8e8;
    }

    .zelle-recipient {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 16px 18px;
      border: 1px solid #e8e8e8;
      margin-top: 12px;

      .zelle-name,
      .zelle-number {
        color: #333333;
        font-size: 15px;
        font-weight: 500;
        line-height: 1.6;
      }

      .zelle-name {
        margin-bottom: 6px;
      }
    }
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    justify-content: stretch;
    display: flex;

    .alert-button {
      flex: 1 1 0;
      font-weight: 600;
      letter-spacing: 0.05em;
      border-radius: 8px;
      padding: 13px 0;
      text-transform: uppercase;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      // OK button with orange border to match theme
      &.alert-button-ok {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }
    }
  }
}

/* Dark theme: Zelle Info Alert */
body.dark-theme .zelle-info-alert .alert-wrapper {
  background: var(--color-bg-card);
  box-shadow: 0 22px 60px var(--color-shadow-heavy);
}

body.dark-theme .zelle-info-alert .alert-title {
  color: var(--color-text-primary);
}

body.dark-theme .zelle-info-alert .alert-message {
  color: var(--color-text-secondary);
}

body.dark-theme .zelle-info-alert .zelle-details {
  color: var(--color-text-secondary);
}

body.dark-theme .zelle-info-alert .zelle-pay-to {
  color: var(--color-text-primary);
  border-bottom-color: var(--color-border-default);
}

body.dark-theme .zelle-info-alert .zelle-recipient {
  background: var(--color-bg-elevated);
  border-color: var(--color-border-default);

  .zelle-name,
  .zelle-number {
    color: var(--color-text-primary);
  }
}

body.dark-theme .zelle-info-alert .alert-button.alert-button-ok {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
}

// Caption Popup Alert - Photo Annotator
.caption-popup-alert {
  --backdrop-opacity: 0.6;

  .alert-wrapper {
    background: #ffffff;
    border-radius: 18px;
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.3);
    padding: 20px 0 12px;
    min-width: min(480px, 92vw);
    max-width: 500px;
    max-height: 90vh;
    overflow: visible;
  }

  .alert-head {
    padding: 8px 20px 12px;
    text-align: center;

    .alert-title {
      font-size: 1.15rem;
      font-weight: 600;
      color: #333333;
      letter-spacing: 0.01em;
    }
  }

  .alert-message {
    padding: 0;
    max-height: calc(90vh - 180px);
    overflow-y: auto;
    
    .caption-popup-content {
      padding: 0 20px;

      .caption-input-container {
        position: relative;
        margin-bottom: 16px;
        display: flex;
        align-items: center;

        .caption-text-input {
          width: 100%;
          padding: 12px 50px 12px 14px; // Extra padding on right for undo button
          border: 2px solid #e0e0e0;
          border-radius: 8px;
          font-size: 15px;
          color: #333;
          background: white;
          transition: all 0.2s ease;
          box-sizing: border-box;
          height: 48px; // Fixed height for consistent button alignment

          &:focus {
            outline: none;
            border-color: #F15A27;
            box-shadow: 0 0 0 3px rgba(241, 90, 39, 0.1);
          }

          &::placeholder {
            color: #999;
            font-style: italic;
          }

          // Mobile: larger touch target
          @media (max-width: 768px) {
            height: 52px;
            font-size: 16px; // Prevent iOS zoom
            padding: 14px 54px 14px 14px;
          }
        }

        .undo-caption-btn {
          position: absolute;
          right: 6px;
          top: 50%;
          transform: translateY(-50%);
          background: #f5f5f5;
          border: 1px solid #ddd;
          border-radius: 6px;
          width: 38px;
          height: 38px;
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          padding: 0;
          z-index: 1; // Ensure button is above input

          ion-icon {
            font-size: 20px;
            color: #666;
          }

          // Desktop only: hover/active effects
          @media (hover: hover) and (pointer: fine) {
            transition: all 0.15s ease;

            &:hover {
              background: #F15A27;
              border-color: #F15A27;

              ion-icon {
                color: white;
              }
            }

            &:active {
              transform: translateY(-50%) scale(0.95);
            }
          }

          // Mobile: static button, no transforms
          @media (max-width: 768px) {
            width: 42px;
            height: 42px;
            right: 5px;
            transition: none;
            transform: translateY(-50%);

            &:active {
              background: #e8e8e8;
            }
          }
        }
      }

      .preset-buttons-container {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
        margin-bottom: 8px;

        .preset-row {
          display: contents;

          .preset-btn {
            padding: 8px 12px;
            background: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 13px;
            color: #333;
            cursor: pointer;
            transition: none; // Remove transition to prevent delay on mobile
            white-space: nowrap;
            font-weight: 500;
            text-align: center;
            -webkit-tap-highlight-color: transparent; // Remove mobile tap highlight
            -webkit-touch-callout: none; // Prevent callout on iOS
            -webkit-user-select: none; // Prevent text selection
            user-select: none;

            // CRITICAL: Only apply hover effects on devices that support hover (desktop)
            // This prevents the hover state from sticking on mobile touch devices
            @media (hover: hover) and (pointer: fine) {
              &:hover {
                background: #F15A27;
                color: white;
                border-color: #F15A27;
                transform: translateY(-1px);
                box-shadow: 0 2px 6px rgba(241, 90, 39, 0.3);
              }
            }

            &:active,
            &:focus,
            &:focus-visible {
              // Reset to default state immediately after click - no orange highlight
              background: #f5f5f5 !important;
              color: #333 !important;
              border-color: #ddd !important;
              transform: translateY(0) !important;
              box-shadow: none !important;
              outline: none !important; // Remove focus outline
            }
          }
        }
      }
    }
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    display: flex;
    gap: 12px;
    justify-content: stretch;

    .alert-button {
      flex: 1 1 0;
      font-weight: 600;
      letter-spacing: 0.05em;
      border-radius: 8px;
      border: none;
      padding: 13px 0;
      text-transform: uppercase;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      &[role="cancel"] {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }

      &:not([role="cancel"]) {
        color: #333;
        background: #f5f5f5;
        border: 2px solid var(--noble-orange, #F15A27);
      }
    }
  }
}

/* Dark theme: Caption Popup Alert */
body.dark-theme .caption-popup-alert .alert-wrapper {
  background: var(--color-bg-card);
  box-shadow: 0 22px 60px var(--color-shadow-heavy);
}

body.dark-theme .caption-popup-alert .alert-title {
  color: var(--color-text-primary);
}

body.dark-theme .caption-popup-alert .caption-text-input {
  background: var(--color-bg-elevated) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-default) !important;

  &::placeholder {
    color: var(--color-text-muted) !important;
  }

  &:focus {
    border-color: var(--noble-orange) !important;
  }
}

body.dark-theme .caption-popup-alert .undo-caption-btn {
  background: var(--color-bg-inset);
  border-color: var(--color-border-default);

  ion-icon {
    color: var(--color-text-secondary);
  }
}

body.dark-theme .caption-popup-alert .preset-btn {
  background: var(--color-bg-elevated) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-default) !important;
}

body.dark-theme .caption-popup-alert .alert-button {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-elevated) !important;
  border-color: var(--noble-orange) !important;
}


// Print styles  focused on letting ngx-extended-pdf-viewer handle printing.
// The viewer renders all pages into #printContainer, then calls window.print().
// Our job: ensure parent containers don't clip, hide UI chrome, stay out of the way.
@media print {
  //  Base reset 
  body, html {
    width: 100% !important;
    height: auto !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: visible !important;
    background: white !important;
  }

  //  Hide EVERYTHING except #printContainer 
  // ngx-extended-pdf-viewer moves #printContainer to be a direct
  // child of <body>. Hide all other body children so only the
  // pre-rendered print pages are visible.
  body > *:not(#printContainer) {
    display: none !important;
  }

  //  Show #printContainer with all rendered pages 
  #printContainer {
    display: block !important;
    position: static !important;
    overflow: visible !important;
    height: auto !important;
    width: 100% !important;
    background: white !important;

    .printedPage {
      display: block !important;
      page-break-after: always !important;
      page-break-inside: avoid !important;
      overflow: visible !important;
      position: relative !important;
    }
  }
}

// Incomplete Fields Alert - preserve whitespace for line breaks
.incomplete-fields-alert {
  .alert-message {
    white-space: pre-line !important;
    text-align: left !important;
    line-height: 1.6 !important;
  }
}

// Sync Details Modal - Full screen for mobile compatibility
.sync-details-modal-fullscreen {
  --width: 100%;
  --height: 100%;
  --max-width: 100%;
  --max-height: 100%;
  --border-radius: 0;

  // Ensure modal is visible on all devices
  ion-header {
    ion-toolbar {
      --background: var(--ion-color-light);
      --color: var(--ion-color-dark);
    }
  }

  ion-content {
    --background: var(--ion-background-color);
  }

  ion-footer {
    ion-toolbar {
      --background: var(--ion-color-light);
    }
  }

  // On larger screens, use a smaller modal
  @media (min-width: 768px) {
    --width: 500px;
    --height: 70%;
    --max-width: 500px;
    --max-height: 700px;
    --border-radius: 16px;
  }
}

// ============================================================================
// MOBILE: Completely disable ALL touch feedback, hover, active, focus states
// This prevents any visual highlighting/selection on touch devices
// ============================================================================
@media (hover: none), (pointer: coarse) {
  // GLOBAL: Remove tap highlight on all elements
  * {
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
  }

  // Allow text selection in inputs and textareas
  input, textarea, [contenteditable="true"] {
    -webkit-user-select: text !important;
    user-select: text !important;
  }

  // GLOBAL: Disable all hover, active, and focus visual states
  // NOTE: Do NOT use background-color: unset here - it breaks header buttons
  *:hover,
  *:active,
  *:focus,
  *:focus-visible,
  *:focus-within {
    outline: none !important;
    box-shadow: none !important;
    transform: none !important;
  }

  // =========================================================================
  // HEADER: Completely static - NO changes on click/touch whatsoever
  // =========================================================================
  ion-header,
  ion-toolbar,
  ion-title,
  ion-buttons {
    transition: none !important;
    transform: none !important;
    -webkit-tap-highlight-color: transparent !important;

    &,
    &:hover,
    &:active,
    &:focus,
    &:focus-visible,
    &:focus-within {
      transition: none !important;
      transform: none !important;
      outline: none !important;
      box-shadow: none !important;
    }

    // All children should also be static
    * {
      transition: none !important;
      -webkit-tap-highlight-color: transparent !important;
    }
  }

  // Header buttons must stay visible and unchanged
  ion-header ion-button,
  ion-toolbar ion-button,
  ion-buttons ion-button {
    transition: none !important;
    transform: none !important;
    opacity: 1 !important;
    visibility: visible !important;
    -webkit-tap-highlight-color: transparent !important;

    &,
    &:hover,
    &:active,
    &:focus,
    &:focus-visible {
      transition: none !important;
      transform: none !important;
      opacity: 1 !important;
      visibility: visible !important;
      outline: none !important;
      box-shadow: none !important;
    }

    &::part(native) {
      transition: none !important;
      transform: none !important;
      opacity: 1 !important;
      visibility: visible !important;

      &:hover, &:active, &:focus {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
        visibility: visible !important;
      }
    }

    ion-icon {
      transition: none !important;
      transform: none !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  // Title must not move
  ion-title {
    position: absolute !important;
    top: 50% !important;
    transition: none !important;
    transform: translateY(-50%) !important;

    &,
    &:hover,
    &:active,
    &:focus {
      transition: none !important;
    }
  }

  // =========================================================================
  // BUTTONS: Complete static state - NO visual feedback whatsoever
  // =========================================================================

  // All button types - force static appearance
  button,
  ion-button,
  .button,
  [role="button"],
  .tool-btn,
  .nav-btn,
  .camera-button-structural,
  .add-visual-btn,
  .delete-btn,
  .add-btn,
  .preset-btn,
  .alert-button,
  .header-icon-button,
  .icon-button,
  .action-button,
  .save-button,
  .cancel-button,
  .back-btn,
  .save-btn {
    // Disable all transitions and animations
    transition: none !important;
    animation: none !important;

    // All states should look identical
    &,
    &:hover,
    &:active,
    &:focus,
    &:focus-visible,
    &:focus-within,
    &:visited,
    &::before,
    &::after {
      transition: none !important;
      animation: none !important;
      transform: none !important;
      opacity: 1 !important;
      outline: none !important;
      box-shadow: none !important;
      filter: none !important;
    }
  }

  // Ionic button - disable ALL internal states
  ion-button {
    --background-hover: var(--background) !important;
    --background-activated: var(--background) !important;
    --background-focused: var(--background) !important;
    --background-hover-opacity: 1 !important;
    --background-activated-opacity: 1 !important;
    --background-focused-opacity: 1 !important;
    --color-hover: var(--color) !important;
    --color-activated: var(--color) !important;
    --color-focused: var(--color) !important;
    --ripple-color: transparent !important;
    --opacity-hover: 1 !important;
    --opacity-activated: 1 !important;
    --opacity-focused: 1 !important;
    transition: none !important;

    &::part(native) {
      transition: none !important;

      &:hover, &:active, &:focus {
        background: inherit !important;
        color: inherit !important;
        opacity: 1 !important;
      }
    }
  }

  ion-item {
    --background-hover: transparent !important;
    --background-activated: transparent !important;
    --background-focused: transparent !important;
    --ripple-color: transparent !important;
    --highlight-background: transparent !important;
    transition: none !important;
  }

  ion-card {
    --ripple-color: transparent !important;
    transition: none !important;
  }

  ion-checkbox {
    --background-hover: transparent !important;
    transition: none !important;
  }

  ion-fab-button {
    --background-hover: var(--background) !important;
    --background-activated: var(--background) !important;
    --background-focused: var(--background) !important;
    --ripple-color: transparent !important;
    transition: none !important;

    &::part(native) {
      transition: none !important;
    }
  }

  // Disable Ionic ripple effect globally
  ion-ripple-effect {
    display: none !important;
  }

  // Navigation cards - no highlighting, static
  .navigation-card,
  ion-card[button="true"],
  ion-card {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08) !important;
      transform: none !important;
    }
  }

  // List items - no highlighting
  ion-item,
  ion-list ion-item {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      --background: transparent !important;
    }
  }

  // Preset buttons in popups - static
  .preset-btn {
    transition: none !important;

    &, &:hover, &:active, &:focus, &:focus-visible {
      background: #f5f5f5 !important;
      color: #333 !important;
      border-color: #ddd !important;
      transform: none !important;
      box-shadow: none !important;
      outline: none !important;
    }
  }

  // Alert and modal buttons - static
  .alert-button {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      opacity: 1 !important;
      transition: none !important;
    }
  }

  // Template and service items - static
  .template-card,
  .template-item,
  .template-bar,
  .service-item,
  .performed-service-item,
  .table-row {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transform: none !important;
      box-shadow: unset !important;
      transition: none !important;
    }
  }

  // Visual containers and checkboxes - static
  .visual-item-container,
  .checkbox-item,
  .answer-type-1-container,
  .multi-select-container {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transition: none !important;
    }
  }

  // Photo previews - static
  .image-preview,
  .structural-photo-preview {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transform: none !important;
      box-shadow: unset !important;
      transition: none !important;
    }

    img {
      transition: none !important;

      &, &:hover, &:active, &:focus {
        transform: none !important;
        box-shadow: none !important;
        transition: none !important;
      }
    }
  }

  // Room cards - static
  .room-card,
  .room-item {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transform: none !important;
      box-shadow: unset !important;
      transition: none !important;
    }
  }

  // Accordion headers - static
  .accordion-header,
  .simple-accordion-header {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transition: none !important;
    }
  }

  // Form inputs - static (except text inputs need focus for editing)
  input:not([type="text"]):not([type="email"]):not([type="password"]):not([type="number"]):not([type="tel"]),
  select,
  .styled-input:not(input):not(textarea) {
    transition: none !important;

    &, &:hover, &:focus {
      border-color: #e8e8e8 !important;
      box-shadow: none !important;
      transition: none !important;
    }
  }

  // Dropdown containers - static
  .dropdown-with-other-container,
  .multi-select-container-inline {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      border-color: #e8e8e8 !important;
      box-shadow: none !important;
      transition: none !important;
    }
  }

  // Segments - static
  ion-segment-button {
    --background-hover: transparent !important;
    --background-focused: transparent !important;
    --indicator-transition: none !important;
    transition: none !important;

    &, &:hover, &:active, &:focus {
      --background-hover: transparent !important;
      transition: none !important;
    }
  }

  // Tabs - static
  ion-tab-button {
    --background-hover: transparent !important;
    --ripple-color: transparent !important;
    transition: none !important;

    &, &:hover, &:active, &:focus {
      --background-hover: transparent !important;
      --ripple-color: transparent !important;
      transition: none !important;
    }
  }

  // Back button - static and always visible (reinforced)
  ion-back-button {
    transition: none !important;
    transform: none !important;
    visibility: visible !important;
    opacity: 1 !important;

    &::part(native) {
      transition: none !important;
      transform: none !important;
      visibility: visible !important;
      opacity: 1 !important;
      background: var(--noble-orange, #F15A27) !important;

      &:hover, &:active, &:focus {
        transition: none !important;
        transform: none !important;
        visibility: visible !important;
        opacity: 1 !important;
        background: var(--noble-orange, #F15A27) !important;
      }
    }

    &, &:hover, &:active, &:focus, &:focus-visible {
      transition: none !important;
      transform: none !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
  }

  // Menu button - static
  ion-menu-button {
    transition: none !important;

    &, &:hover, &:active, &:focus {
      transition: none !important;
      opacity: 1 !important;
    }
  }

  // Action sheet buttons - static (no highlighting when scrolling)
  ion-action-sheet {
    .action-sheet-group {
      .action-sheet-button {
        transition: none !important;
        -webkit-tap-highlight-color: transparent !important;

        &,
        &:hover,
        &:active,
        &:focus,
        &:focus-visible,
        &.activated,
        &.ion-activated,
        &[aria-pressed="true"] {
          background: transparent !important;
          transition: none !important;
          transform: none !important;
          opacity: 1 !important;
          outline: none !important;
          box-shadow: none !important;
        }

        .action-sheet-button-inner {
          background: transparent !important;
        }
      }
    }
  }

  // Select - static
  ion-select {
    transition: none !important;

    &::part(icon) {
      transition: none !important;
    }
  }

  // Toggle - static (except actual toggle action)
  ion-toggle {
    transition: none !important;
  }

  // All links - static
  a {
    transition: none !important;

    &, &:hover, &:active, &:focus, &:visited {
      transition: none !important;
    }
  }
}

// ============================================================================
// Text Editor Modal - Large popup for editing visual descriptions
// ============================================================================
ion-alert.text-editor-modal,
.text-editor-modal {
  // Center the alert on screen
  --min-width: auto !important;
  --max-width: 90vw !important;
  --width: auto !important;

  // Ensure proper centering
  justify-content: center !important;
  align-items: center !important;

  .alert-wrapper {
    width: 90vw !important;
    max-width: 500px !important;
    min-height: 45vh !important;
    max-height: 80vh !important;
    border-radius: 16px !important;
    overflow: hidden !important;
    margin: auto !important;
    position: relative !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
  }
}

// Target the alert wrapper directly with high specificity
ion-alert.text-editor-modal .alert-wrapper,
.text-editor-modal .alert-wrapper {
  width: 90vw !important;
  max-width: 500px !important;
  min-height: 45vh !important;
  max-height: 80vh !important;
  border-radius: 16px !important;
  margin: auto !important;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3) !important;
}

ion-alert.text-editor-modal .alert-head,
.text-editor-modal .alert-head {
  padding: 20px 24px 16px !important;
  background: #f8f9fa !important;
  border-bottom: 1px solid #e8e8e8 !important;
}

ion-alert.text-editor-modal .alert-title,
.text-editor-modal .alert-title {
  font-size: 18px !important;
  font-weight: 600 !important;
  color: #333 !important;
}

ion-alert.text-editor-modal .alert-input-group,
.text-editor-modal .alert-input-group {
  padding: 16px 20px !important;
  max-height: 55vh !important;
  overflow-y: auto !important;
}

ion-alert.text-editor-modal .alert-input-wrapper,
.text-editor-modal .alert-input-wrapper {
  margin-bottom: 12px !important;
}

// Title input - read only field
ion-alert.text-editor-modal .alert-input-wrapper input.editor-title-input,
ion-alert.text-editor-modal input.editor-title-input,
.text-editor-modal .editor-title-input {
  background: #f5f5f5 !important;
  border: 1px solid #ddd !important;
  border-radius: 8px !important;
  padding: 12px 14px !important;
  font-size: 16px !important;
  font-weight: 600 !important;
  color: #333 !important;
}

// Textarea - make it much larger
ion-alert.text-editor-modal .alert-input-wrapper textarea,
ion-alert.text-editor-modal textarea.alert-input,
ion-alert.text-editor-modal textarea,
.text-editor-modal .alert-input-wrapper textarea,
.text-editor-modal textarea.alert-input,
.text-editor-modal textarea {
  background: #ffffff !important;
  border: 2px solid #e0e0e0 !important;
  border-radius: 8px !important;
  padding: 14px 16px !important;
  font-size: 16px !important;
  line-height: 1.6 !important;
  color: #333 !important;
  min-height: 250px !important;
  height: 250px !important;
  resize: vertical !important;
  width: 100% !important;
  box-sizing: border-box !important;
}

ion-alert.text-editor-modal textarea:focus,
.text-editor-modal textarea:focus {
  outline: none !important;
  border-color: #F15A27 !important;
  box-shadow: 0 0 0 3px rgba(241, 90, 39, 0.1) !important;
}

ion-alert.text-editor-modal .alert-button-group,
.text-editor-modal .alert-button-group {
  padding: 16px 20px 20px !important;
  gap: 12px !important;
  display: flex !important;
  justify-content: stretch !important;
  border-top: 1px solid #e8e8e8 !important;
  background: #f8f9fa !important;
}

ion-alert.text-editor-modal .alert-button,
.text-editor-modal .alert-button {
  flex: 1 !important;
  font-weight: 600 !important;
  border-radius: 8px !important;
  padding: 14px 0 !important;
  font-size: 15px !important;
  text-transform: none !important;
}

ion-alert.text-editor-modal .alert-button.editor-save-btn,
.text-editor-modal .alert-button.editor-save-btn {
  background: var(--noble-orange, #F15A27) !important;
  color: white !important;
}

// Mobile responsive - centered with padding from sides
@media (max-width: 768px) {
  ion-alert.text-editor-modal .alert-wrapper,
  .text-editor-modal .alert-wrapper {
    width: calc(100vw - 32px) !important;
    max-width: calc(100vw - 32px) !important;
    min-height: 50vh !important;
    max-height: 75vh !important;
    border-radius: 16px !important;
    margin: auto !important;
    position: relative !important;
    left: auto !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
  }

  ion-alert.text-editor-modal textarea,
  .text-editor-modal textarea {
    min-height: 200px !important;
    height: 200px !important;
  }
}

/* Dark theme: Text Editor Modal */
body.dark-theme .text-editor-modal .alert-head,
body.dark-theme ion-alert.text-editor-modal .alert-head {
  background: var(--color-bg-elevated) !important;
  border-bottom-color: var(--color-border-default) !important;
}

body.dark-theme .text-editor-modal .alert-title,
body.dark-theme ion-alert.text-editor-modal .alert-title {
  color: var(--color-text-primary) !important;
}

body.dark-theme .text-editor-modal textarea,
body.dark-theme ion-alert.text-editor-modal textarea {
  background: var(--color-bg-elevated) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-default) !important;
}

body.dark-theme .text-editor-modal .editor-title-input,
body.dark-theme ion-alert.text-editor-modal .editor-title-input {
  background: var(--color-bg-inset) !important;
  color: var(--color-text-primary) !important;
  border-color: var(--color-border-default) !important;
}

body.dark-theme .text-editor-modal .alert-button-group,
body.dark-theme ion-alert.text-editor-modal .alert-button-group {
  background: var(--color-bg-elevated) !important;
  border-top-color: var(--color-border-default) !important;
}

body.dark-theme .text-editor-modal .alert-button:not(.editor-save-btn),
body.dark-theme ion-alert.text-editor-modal .alert-button:not(.editor-save-btn) {
  color: var(--color-text-primary) !important;
  background: var(--color-bg-inset) !important;
}

/* ============================================
   Progress Indicators for Long Operations (Web Only)
   G2-LOADING-003
   ============================================ */

/* Progress bar styles for PDF generation */
.progress-loading-alert {
  --backdrop-opacity: 0.55;
  --ion-text-color: var(--noble-dark-gray, #333333);
}

.progress-loading-alert .alert-wrapper {
  background: #ffffff;
  border-radius: 18px;
  box-shadow: 0 22px 60px rgba(0, 0, 0, 0.28);
  min-width: min(420px, 90vw);
  padding: 24px 0 12px;
}

.progress-loading-alert .alert-head {
  text-align: center;
  padding: 8px 24px 16px;
  border-bottom: none;
}

.progress-loading-alert .alert-title {
  font-size: 1.15rem;
  font-weight: 600;
  color: #333333;
  letter-spacing: 0.01em;
}

.progress-loading-alert .alert-message {
  padding: 0 24px 16px;
  color: #666666;
  font-size: 15px;
  text-align: center;
  line-height: 1.4;
}

/* Progress container within alerts */
.progress-container {
  width: 100%;
  padding: 0 24px;
  margin: 8px 0 16px;
}

.progress-bar-wrapper {
  width: 100%;
  height: 8px;
  background: rgba(241, 90, 39, 0.15);
  border-radius: 4px;
  overflow: hidden;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--noble-orange, #F15A27), #ff7849);
  border-radius: 4px;
  transition: width 0.3s ease-out;
  position: relative;
}

.progress-bar-fill::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: progress-shimmer 1.5s ease-in-out infinite;
}

@keyframes progress-shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.progress-percentage {
  font-size: 24px;
  font-weight: 700;
  color: var(--noble-orange, #F15A27);
  text-align: center;
  margin-bottom: 8px;
}

.progress-step {
  font-size: 13px;
  color: #888;
  text-align: center;
  margin-top: 8px;
}

.progress-step-count {
  font-weight: 600;
  color: #666;
}

.progress-loading-alert .alert-button-group {
  padding: 12px 24px 20px;
  display: flex;
  justify-content: center;
  gap: 12px;
}

.progress-loading-alert .alert-button {
  flex: 1 1 0;
  min-width: 140px;
  font-weight: 600;
  letter-spacing: 0.05em;
  border-radius: 8px;
  padding: 13px 0;
  font-size: 14px;
  text-transform: none;
  color: #333;
  background: #f5f5f5;
  border: 2px solid var(--noble-orange, #F15A27);
}

.progress-loading-alert .alert-button .alert-button-inner {
  display: flex;
  align-items: center;
  justify-content: center;
  text-transform: none;
}

.progress-loading-alert .alert-button:hover,
.progress-loading-alert .alert-button:active,
.progress-loading-alert .alert-button:focus {
  background: #f5f5f5;
  color: #333;
  border-color: var(--noble-orange, #F15A27);
}

/* Upload progress toast/indicator styles */
.upload-progress-container {
  position: fixed;
  bottom: 80px;
  right: 20px;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-width: 320px;
}

.upload-progress-item {
  background: white;
  border-radius: 12px;
  padding: 12px 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  border-left: 4px solid var(--noble-orange, #F15A27);
  animation: slideInRight 0.3s ease-out;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.upload-progress-item.completed {
  border-left-color: #4caf50;
}

.upload-progress-item.error {
  border-left-color: #f44336;
}

.upload-progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.upload-progress-filename {
  font-size: 13px;
  font-weight: 600;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

.upload-progress-percent {
  font-size: 13px;
  font-weight: 700;
  color: var(--noble-orange, #F15A27);
}

.upload-progress-bar {
  width: 100%;
  height: 4px;
  background: rgba(241, 90, 39, 0.15);
  border-radius: 2px;
  overflow: hidden;
}

.upload-progress-bar-fill {
  height: 100%;
  background: var(--noble-orange, #F15A27);
  border-radius: 2px;
  transition: width 0.2s ease-out;
}

.upload-progress-item.completed .upload-progress-bar-fill {
  background: #4caf50;
}

.upload-progress-item.error .upload-progress-bar-fill {
  background: #f44336;
}

.upload-progress-stage {
  font-size: 11px;
  color: #888;
  margin-top: 4px;
}

/* Batch operation progress styles */
.batch-progress-container {
  background: white;
  border-radius: 12px;
  padding: 16px 20px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  margin: 16px 0;
}

.batch-progress-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.batch-progress-title {
  font-size: 14px;
  font-weight: 600;
  color: #333;
}

.batch-progress-count {
  font-size: 14px;
  font-weight: 700;
  color: var(--noble-orange, #F15A27);
}

.batch-progress-bar {
  width: 100%;
  height: 6px;
  background: rgba(241, 90, 39, 0.15);
  border-radius: 3px;
  overflow: hidden;
}

.batch-progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--noble-orange, #F15A27), #ff7849);
  border-radius: 3px;
  transition: width 0.3s ease-out;
}

.batch-progress-items {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-top: 12px;
}

.batch-progress-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(241, 90, 39, 0.2);
  transition: background 0.2s ease;
}

.batch-progress-dot.completed {
  background: #4caf50;
}

.batch-progress-dot.in-progress {
  background: var(--noble-orange, #F15A27);
  animation: pulse 1s ease-in-out infinite;
}

.batch-progress-dot.error {
  background: #f44336;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.3);
    opacity: 0.7;
  }
}

/* ============================================
   Real-Time Form Validation Styles (Web Only)
   G2-FORMS-001
   ============================================ */

/* Validation error message - inline display near field */
.validation-error {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #dc3545;
  font-size: 12px;
  margin-top: 4px;
  padding-left: 2px;
  animation: validationFadeIn 0.2s ease-out;

  ion-icon {
    font-size: 14px;
    flex-shrink: 0;
    color: #dc3545;
  }
}

@keyframes validationFadeIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Input error state styling */
.input-error,
input.input-error,
ion-input.input-error,
ion-textarea.input-error {
  --border-color: #dc3545 !important;
  border-color: #dc3545 !important;

  &:focus,
  &:focus-within {
    --border-color: #dc3545 !important;
    border-color: #dc3545 !important;
    box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1) !important;
  }
}

/* Select error state */
select.select-error,
.select-error {
  border-color: #dc3545 !important;
  box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1) !important;
}

/* Ion-item error state */
ion-item.item-error {
  --border-color: #dc3545;
  --highlight-color-focused: #dc3545;
  --highlight-color-valid: #dc3545;
  --highlight-color-invalid: #dc3545;
}

/* Field wrapper for validation layout */
.field-wrapper,
.input-wrapper {
  margin-bottom: 12px;
  position: relative;
}

/* Valid field success indicator (optional - shown after validation passes) */
.input-valid,
input.input-valid,
ion-input.input-valid {
  --border-color: #28a745 !important;
  border-color: #28a745 !important;
}

/* Validation success message (optional) */
.validation-success {
  display: flex;
  align-items: center;
  gap: 6px;
  color: #28a745;
  font-size: 12px;
  margin-top: 4px;
  padding-left: 2px;
  animation: validationFadeIn 0.2s ease-out;

  ion-icon {
    font-size: 14px;
    flex-shrink: 0;
    color: #28a745;
  }
}

/* ============================================
   Global Error Boundary Styles (Web Only)
   G2-ERRORS-001
   ============================================ */

.error-boundary-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 99999;
  padding: 16px;
  animation: errorOverlayFadeIn 0.2s ease-out;
}

@keyframes errorOverlayFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.error-boundary-modal {
  background: #fff;
  border-radius: 12px;
  padding: 32px;
  max-width: 480px;
  width: 100%;
  text-align: center;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: errorModalSlideIn 0.3s ease-out;
}

@keyframes errorModalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.error-boundary-modal .error-icon {
  margin-bottom: 16px;

  ion-icon {
    font-size: 64px;
    color: #dc3545;
  }
}

.error-boundary-modal .error-title {
  font-size: 24px;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0 0 12px 0;
}

.error-boundary-modal .error-message {
  font-size: 16px;
  color: #666;
  margin: 0 0 24px 0;
  line-height: 1.5;
}

.error-boundary-modal .error-debug {
  text-align: left;
  margin-bottom: 24px;
  background: #f8f9fa;
  border-radius: 8px;
  padding: 12px;

  details {
    cursor: pointer;

    summary {
      font-size: 14px;
      font-weight: 500;
      color: #666;
      margin-bottom: 8px;
    }

    pre {
      font-size: 11px;
      color: #333;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      margin: 0;
      max-height: 150px;
      overflow-y: auto;
    }
  }
}

.error-boundary-modal .error-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.error-boundary-modal .error-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 20px;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  border: none;
  transition: background-color 0.2s ease, transform 0.1s ease;

  ion-icon {
    font-size: 18px;
  }

  &:active {
    transform: scale(0.98);
  }
}

.error-boundary-modal .error-btn-primary {
  background: var(--noble-orange, #F15A27);
  color: #fff;

  &:hover {
    background: #d94d1f;
  }
}

.error-boundary-modal .error-btn-secondary {
  background: #e9ecef;
  color: #495057;

  &:hover {
    background: #dee2e6;
  }
}

.error-boundary-modal .error-help {
  font-size: 13px;
  color: #999;
  margin: 0;
}

/* Mobile adjustments for error boundary */
@media (max-width: 480px) {
  .error-boundary-modal {
    padding: 24px;
  }

  .error-boundary-modal .error-icon ion-icon {
    font-size: 48px;
  }

  .error-boundary-modal .error-title {
    font-size: 20px;
  }

  .error-boundary-modal .error-message {
    font-size: 14px;
  }

  .error-boundary-modal .error-actions {
    flex-direction: column;
  }

  .error-boundary-modal .error-btn {
    width: 100%;
    justify-content: center;
  }
}

/* Dark theme support for error boundary */
body.dark-theme {
  .error-boundary-modal {
    background: #1e1e1e;
  }

  .error-boundary-modal .error-title {
    color: #fff;
  }

  .error-boundary-modal .error-message {
    color: #aaa;
  }

  .error-boundary-modal .error-debug {
    background: #2a2a2a;

    details summary {
      color: #aaa;
    }

    pre {
      color: #ddd;
    }
  }

  .error-boundary-modal .error-btn-secondary {
    background: #333;
    color: #ddd;

    &:hover {
      background: #444;
    }
  }

  .error-boundary-modal .error-help {
    color: #777;
  }
}

/* ============================================================================
 * G2-A11Y-002: Web-only Keyboard Accessibility Focus Styles
 * Provides visible focus indicators for keyboard navigation.
 * Uses :focus-visible to only show focus on keyboard interaction (not mouse clicks).
 * Only applies on web (hover: hover) - mobile devices are not affected.
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* Skip link styles are in the component itself */

  /* Global focus-visible outline for all interactive elements (excluding inputs) */
  a:focus-visible,
  button:focus-visible,
  [role="button"]:focus-visible,
  [tabindex]:not([tabindex="-1"]):not(ion-input):not(ion-textarea):not(input):not(textarea):not(select):focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Inputs and selects have no focus outline */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible,
  ion-input:focus-visible,
  ion-textarea:focus-visible {
    outline: none !important;
  }

  /* Ionic-specific focus-visible styles (excluding input-like elements) */
  ion-button:focus-visible,
  ion-back-button:focus-visible,
  ion-tab-button:focus-visible,
  ion-fab-button:focus-visible,
  ion-item:focus-visible,
  ion-checkbox:focus-visible,
  ion-toggle:focus-visible,
  ion-segment-button:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Searchbar has no focus outline */
  ion-searchbar:focus-visible {
    outline: none !important;
  }

  /* Focus styles for Ionic native parts */
  ion-button::part(native):focus-visible,
  ion-back-button::part(native):focus-visible,
  ion-fab-button::part(native):focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Input fields - no orange highlight on focus */
  ion-input:focus-within,
  ion-textarea:focus-within,
  ion-searchbar:focus-within {
    --highlight-color: transparent;
  }

  ion-input.has-focus,
  ion-textarea.has-focus {
    outline: none !important;
  }

  /* Card and list items that are interactive */
  ion-card[button]:focus-visible,
  ion-item[button]:focus-visible,
  ion-item.item-interactive:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Modal and popover close buttons */
  .modal-close-btn:focus-visible,
  .close-btn:focus-visible,
  [aria-label*="Close"]:focus-visible,
  [aria-label*="close"]:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Toolbar buttons */
  .toolbar-btn:focus-visible,
  ion-toolbar ion-button:focus-visible,
  ion-header ion-button:focus-visible {
    outline: 3px solid white !important;
    outline-offset: 2px !important;
    border-radius: 4px;
  }

  /* Tab bar focus styles */
  ion-tab-bar ion-tab-button:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: -3px !important;
    background: rgba(241, 90, 39, 0.1);
  }

  /* Project cards and list items */
  .project-card:focus-visible,
  .project-item:focus-visible,
  .list-item:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Image viewer and gallery items */
  .thumbnail:focus-visible,
  .gallery-item:focus-visible,
  .image-item:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Annotation tools */
  .annotation-tool:focus-visible,
  .tool-btn:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Virtual scroll items */
  .cdk-virtual-scroll-content-wrapper [tabindex]:focus-visible {
    outline: 3px solid var(--noble-orange, #F15A27) !important;
    outline-offset: 2px !important;
  }

  /* Ensure main content area can receive focus for skip link */
  #main-content:focus {
    outline: none;
  }

  /* High contrast mode support */
  @media (forced-colors: active) {
    a:focus-visible,
    button:focus-visible,
    [role="button"]:focus-visible,
    input:focus-visible,
    select:focus-visible,
    textarea:focus-visible,
    [tabindex]:not([tabindex="-1"]):focus-visible,
    ion-button:focus-visible,
    ion-back-button:focus-visible,
    ion-tab-button:focus-visible,
    ion-fab-button:focus-visible,
    ion-item:focus-visible {
      outline: 3px solid CanvasText !important;
      outline-offset: 2px !important;
    }
  }
}

/* Login page: Kill ALL orange/colored focus indicators on inputs.
 * ion-input uses scoped encapsulation so its internal elements are in regular DOM.
 * The login page uses plain <div> wrappers (not ion-item) to avoid shadow DOM issues. */
.login-content ion-input {
  outline: none !important;
  --highlight-color-focused: transparent !important;
  --highlight-color-valid: transparent !important;
  --highlight-color-invalid: transparent !important;
  --highlight-color: transparent !important;
  --highlight-height: 0px !important;
  --border-width: 0 !important;
}

/* Center native input vertically inside ion-input (md mode sets min-height: 56px,
   internal .input-wrapper is column flex  needs justify-content to center content) */
.login-content .input-wrapper {
  justify-content: center;
}

/* Hide the input-highlight bar (renders when ion-input is NOT inside ion-item) */
.login-content .input-highlight {
  display: none !important;
  height: 0 !important;
  background: transparent !important;
  transform: scale(0) !important;
}

/* Hide any input-bottom border */
.login-content .input-bottom {
  border-top: none !important;
}

/* Login autofill styling (must be global to penetrate Stencil scoped DOM) */
.login-content .input-item input:-webkit-autofill,
.login-content .input-item input:-webkit-autofill:hover,
.login-content .input-item input:-webkit-autofill:focus,
.login-content .input-item input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 1000px #f8f9fa inset !important;
  -webkit-text-fill-color: #333 !important;
  background-color: #f8f9fa !important;
  caret-color: #000 !important;
  transition: background-color 5000s ease-in-out 0s !important;
}

/* ============================================================================
 * G2-A11Y-004: WCAG AA Color Contrast Compliance (Web Only)
 * Ensures sufficient color contrast for text and UI elements.
 * - Normal text: 4.5:1 minimum contrast ratio
 * - Large text (18pt+ or 14pt bold): 3:1 minimum contrast ratio
 * - UI components & graphical objects: 3:1 minimum contrast ratio
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* Secondary text - use accessible gray instead of noble-gray (#69635D -> #595959) */
  .text-gray,
  .text-secondary,
  .text-muted,
  .info-label,
  .field-label,
  .form-label,
  .section-subtitle,
  .helper-text {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* Placeholder text - WCAG AA compliant placeholder color (#767676 has 4.52:1 ratio) */
  input::placeholder,
  textarea::placeholder,
  ion-input::placeholder,
  ion-textarea::placeholder,
  .placeholder {
    color: var(--a11y-placeholder, #767676) !important;
    opacity: 1 !important;
  }

  /* Ionic placeholder color override */
  ion-input {
    --placeholder-color: var(--a11y-placeholder, #767676);
    --placeholder-opacity: 1;
  }

  ion-textarea {
    --placeholder-color: var(--a11y-placeholder, #767676);
    --placeholder-opacity: 1;
  }

  /* Styled input placeholder */
  .styled-input::placeholder {
    color: var(--a11y-placeholder, #767676) !important;
  }

  /* Alert message text - ensure proper contrast */
  .alert-message,
  .custom-other-alert .alert-message,
  .template-loading-alert .alert-message,
  .custom-document-alert .alert-message,
  .zelle-info-alert .alert-message {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* Tab bar - unselected tabs need better contrast */
  ion-tab-bar ion-tab-button {
    --color: var(--a11y-text-secondary, #595959);
  }

  /* Segment buttons - unselected state */
  ion-segment ion-segment-button {
    --color: var(--a11y-text-secondary, #595959);
  }

  /* Card subtitles and secondary info */
  ion-card-subtitle,
  .card-subtitle,
  .subtitle {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* List item secondary text */
  ion-item ion-note,
  ion-item .item-note,
  .item-detail,
  .item-secondary {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* Disabled state - still needs to be readable */
  .disabled,
  [disabled],
  :disabled {
    color: var(--a11y-text-disabled, #757575) !important;
    opacity: 1 !important;
  }

  /* Badge secondary - ensure contrast */
  ion-badge.badge-secondary,
  .badge-secondary {
    --background: var(--a11y-text-secondary, #595959) !important;
    --color: #FFFFFF !important;
  }

  /* Chip text color - ensure contrast */
  ion-chip {
    --color: var(--noble-dark-gray, #333333);
  }

  /* Form validation messages - ensure contrast for error/success states */
  .validation-error {
    color: #B91C1C !important; /* Darker red with 5.91:1 contrast ratio */
  }

  .validation-success {
    color: #15803D !important; /* Darker green with 4.53:1 contrast ratio */
  }

  /* Info sections - secondary labels */
  .info-section .info-label,
  .detail-label,
  .field-name {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* Table headers - ensure sufficient contrast */
  .services-table .table-header,
  .table-header,
  th {
    color: var(--a11y-text-secondary, #595959) !important;
    background-color: #EAEAEA !important;
  }

  /* Muted/hint text */
  .hint,
  .caption,
  .small-text,
  .meta-text {
    color: var(--a11y-text-muted, #6B6B6B) !important;
  }

  /* UI component borders - 3:1 contrast minimum */
  .styled-input:not(:focus),
  select.styled-input:not(:focus) {
    border-color: var(--a11y-ui-border, #949494);
  }

  /* Progress steps and counts */
  .progress-step {
    color: var(--a11y-text-muted, #6B6B6B) !important;
  }

  .progress-step-count {
    color: var(--a11y-text-secondary, #595959) !important;
  }

  /* Upload progress stage text */
  .upload-progress-stage {
    color: var(--a11y-text-muted, #6B6B6B) !important;
  }

  /* Error help text */
  .error-boundary-modal .error-help {
    color: var(--a11y-text-muted, #6B6B6B) !important;
  }
}

/* Dark theme WCAG AA color contrast overrides (Web Only) */
@media (hover: hover) and (pointer: fine) {
  body.dark-theme {
    /* Secondary text for dark theme */
    .text-gray,
    .text-secondary,
    .text-muted,
    .info-label,
    .field-label,
    .form-label,
    .section-subtitle,
    .helper-text {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* Placeholder text for dark theme */
    input::placeholder,
    textarea::placeholder,
    ion-input::placeholder,
    ion-textarea::placeholder,
    .placeholder {
      color: var(--a11y-placeholder, #A0A0A0) !important;
    }

    ion-input {
      --placeholder-color: var(--a11y-placeholder, #A0A0A0);
    }

    ion-textarea {
      --placeholder-color: var(--a11y-placeholder, #A0A0A0);
    }

    /* Alert message text */
    .alert-message,
    .custom-other-alert .alert-message,
    .template-loading-alert .alert-message,
    .custom-document-alert .alert-message {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* Tab bar - unselected tabs */
    ion-tab-bar ion-tab-button {
      --color: var(--a11y-text-secondary, #B0B0B0);
    }

    /* Segment buttons */
    ion-segment ion-segment-button {
      --color: var(--a11y-text-secondary, #B0B0B0);
    }

    /* Card subtitles */
    ion-card-subtitle,
    .card-subtitle,
    .subtitle {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* List item notes */
    ion-item ion-note,
    ion-item .item-note,
    .item-detail,
    .item-secondary {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* Disabled state */
    .disabled,
    [disabled],
    :disabled {
      color: var(--a11y-text-disabled, #8A8A8A) !important;
    }

    /* Form validation - dark theme accessible colors */
    .validation-error {
      color: #FCA5A5 !important; /* Light red for dark backgrounds */
    }

    .validation-success {
      color: #86EFAC !important; /* Light green for dark backgrounds */
    }

    /* Info section labels */
    .info-section .info-label,
    .detail-label,
    .field-name {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* Table headers - dark theme */
    .services-table .table-header,
    .table-header,
    th {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
      background-color: #252525 !important;
    }

    /* Muted text */
    .hint,
    .caption,
    .small-text,
    .meta-text {
      color: var(--a11y-text-muted, #9A9A9A) !important;
    }

    /* UI borders */
    .styled-input:not(:focus),
    select.styled-input:not(:focus) {
      border-color: var(--a11y-ui-border, #6E6E6E);
    }

    /* Progress and upload text */
    .progress-step,
    .upload-progress-stage {
      color: var(--a11y-text-muted, #9A9A9A) !important;
    }

    .progress-step-count {
      color: var(--a11y-text-secondary, #B0B0B0) !important;
    }

    /* Error help text */
    .error-boundary-modal .error-help {
      color: var(--a11y-text-muted, #9A9A9A) !important;
    }
  }
}

/* ============================================================================
 * G2-UX-001: Hover States for Interactive Elements (Web Only)
 * Provides clear visual feedback on hover for buttons, links, and cards.
 * Only applies on web (hover: hover) - mobile/touch devices are not affected.
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* =========================================================================
   * CURSOR: Pointer for all clickable elements
   * ========================================================================= */
  a,
  button,
  [role="button"],
  [role="link"],
  [role="menuitem"],
  [role="option"],
  [role="tab"],
  [tabindex]:not([tabindex="-1"]),
  ion-button,
  ion-back-button,
  ion-fab-button,
  ion-tab-button,
  ion-segment-button,
  ion-item[button],
  ion-item.item-interactive,
  ion-card[button],
  ion-checkbox,
  ion-toggle,
  ion-select,
  ion-chip,
  .clickable,
  .navigation-card,
  .template-card,
  .service-item,
  .tool-btn,
  .nav-btn,
  .add-btn,
  .delete-btn,
  .preset-btn,
  .action-button,
  .icon-button,
  .header-icon-button {
    cursor: pointer;
  }

  /* =========================================================================
   * BUTTONS: Hover state with background/color change
   * ========================================================================= */

  /* Ionic solid buttons */
  ion-button.button-solid {
    transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      --background: var(--ion-color-primary-shade, #D44E22);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(241, 90, 39, 0.25);
    }
  }

  /* Ionic outline buttons */
  ion-button.button-outline {
    transition: all 0.2s ease;

    &:hover {
      --background: var(--noble-orange, #F15A27);
      --color: var(--noble-white, #FFFFFF);
      transform: translateY(-1px);
    }
  }

  /* Ionic clear buttons */
  ion-button.button-clear {
    transition: color 0.2s ease, background-color 0.2s ease;

    &:hover {
      --color: var(--ion-color-primary-shade, #D44E22);
      --background: rgba(241, 90, 39, 0.08);
    }
  }

  /* FAB buttons */
  ion-fab-button {
    transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      --background: var(--ion-color-primary-shade, #D44E22);
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(241, 90, 39, 0.3);
    }
  }

  /* Tab buttons */
  ion-tab-button {
    transition: color 0.2s ease, background-color 0.2s ease;

    &:hover:not(.tab-selected) {
      --color: var(--noble-orange, #F15A27);
      background-color: rgba(241, 90, 39, 0.05);
    }
  }

  /* Segment buttons */
  ion-segment-button {
    transition: all 0.2s ease;

    &:hover:not(.segment-button-checked) {
      --color: var(--noble-orange, #F15A27);
      background-color: rgba(241, 90, 39, 0.08);
    }
  }

  /* Generic button hover */
  button:not(ion-button):not([disabled]),
  .button:not([disabled]),
  [role="button"]:not([disabled]) {
    transition: background-color 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      filter: brightness(0.95);
    }
  }

  /* Tool buttons (annotation tools, etc.) */
  .tool-btn,
  .nav-btn,
  .icon-button,
  .header-icon-button {
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;

    &:hover:not([disabled]):not(.active) {
      background-color: rgba(241, 90, 39, 0.1);
      color: var(--noble-orange, #F15A27);
    }
  }

  /* Action buttons */
  .action-button,
  .add-btn,
  .save-btn {
    transition: all 0.2s ease;

    &:hover:not([disabled]) {
      transform: translateY(-1px);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }
  }

  /* Delete buttons - red hover */
  .delete-btn {
    transition: all 0.2s ease;

    &:hover:not([disabled]) {
      background-color: rgba(220, 38, 38, 0.1);
      color: #DC2626;
    }
  }

  /* =========================================================================
   * LINKS: Hover underline and color change
   * ========================================================================= */
  a:not(ion-item):not(ion-button):not(.no-hover) {
    transition: color 0.2s ease;

    &:hover {
      color: var(--ion-color-primary-shade, #D44E22);
      text-decoration: underline;
    }
  }

  /* Breadcrumb links */
  ion-breadcrumb {
    transition: color 0.2s ease, background-color 0.2s ease;

    &:hover:not(.breadcrumb-active) {
      color: var(--noble-orange, #F15A27);
      background-color: rgba(241, 90, 39, 0.08);
    }
  }

  /* =========================================================================
   * CARDS: Subtle lift and shadow on hover
   * ========================================================================= */
  ion-card[button],
  ion-card.clickable,
  .navigation-card,
  .template-card,
  .card-clickable {
    transition: transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }
  }

  /* Service and template items */
  .service-item,
  .template-item,
  .performed-service-item {
    transition: background-color 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      background-color: rgba(241, 90, 39, 0.04);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }
  }

  /* =========================================================================
   * LIST ITEMS: Background change on hover
   * ========================================================================= */
  ion-item[button],
  ion-item.item-interactive {
    transition: background-color 0.2s ease;

    &:hover {
      --background: var(--noble-light-gray, #F5F5F5);
    }
  }

  /* Table rows */
  .table-row:not(.table-header) {
    transition: background-color 0.2s ease;

    &:hover {
      background-color: rgba(241, 90, 39, 0.04);
    }
  }

  /* =========================================================================
   * CHIPS: Hover state for interactive chips
   * ========================================================================= */
  ion-chip[button],
  ion-chip.clickable {
    transition: background-color 0.2s ease, border-color 0.2s ease;

    &:hover {
      background-color: rgba(241, 90, 39, 0.1);
      border-color: var(--noble-orange, #F15A27);
    }
  }

  /* =========================================================================
   * CHECKBOXES & TOGGLES: Visual feedback on hover
   * ========================================================================= */
  ion-checkbox:not([disabled]) {
    transition: transform 0.2s ease;

    &:hover {
      transform: scale(1.05);
    }
  }

  ion-toggle:not([disabled]) {
    transition: transform 0.2s ease;

    &:hover {
      transform: scale(1.02);
    }
  }

  /* =========================================================================
   * IMAGE PREVIEWS: Subtle hover effect
   * ========================================================================= */
  .image-preview,
  .structural-photo-preview,
  .photo-thumbnail {
    transition: transform 0.2s ease, box-shadow 0.2s ease;

    &:hover {
      transform: scale(1.02);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }
  }

  /* =========================================================================
   * VISUAL ITEMS: Background highlight on hover
   * ========================================================================= */
  .visual-item-container,
  .answer-type-1-container {
    transition: background-color 0.2s ease, border-color 0.2s ease;

    &:hover {
      background-color: rgba(241, 90, 39, 0.03);
      border-color: rgba(241, 90, 39, 0.2);
    }
  }

  /* =========================================================================
   * BACK BUTTON: Hover state
   * ========================================================================= */
  ion-back-button {
    transition: color 0.2s ease;

    &:hover {
      --color: var(--ion-color-primary-shade, #D44E22);
    }
  }

  /* =========================================================================
   * SELECT DROPDOWNS: Hover highlight
   * ========================================================================= */
  ion-select {
    transition: border-color 0.2s ease;

    &:hover:not([disabled]) {
      --border-color: var(--noble-orange, #F15A27);
    }
  }

  /* =========================================================================
   * MODAL CLOSE BUTTONS: Hover effect
   * ========================================================================= */
  .modal-close-btn,
  .close-btn {
    transition: background-color 0.2s ease, color 0.2s ease, transform 0.2s ease;

    &:hover {
      background-color: rgba(0, 0, 0, 0.08);
      color: var(--noble-orange, #F15A27);
      transform: scale(1.1);
    }
  }
}

/* ============================================================================
 * G2-UX-002: Smooth Transition Animations (Web Only)
 * Provides smooth CSS transitions for state changes, page transitions,
 * expanding/collapsing sections, and modal fade in/out.
 * Only applies on web - mobile app is not affected.
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* =========================================================================
   * PAGE TRANSITIONS: Smooth fade-in for page content
   * ========================================================================= */

  /* Main page content fade-in on navigation */
  ion-router-outlet > .ion-page {
    animation: pageSlideIn 0.3s ease-out;
  }

  /* Page content containers */
  ion-content {
    --background: var(--ion-background-color, #fff);

    .ion-page-invisible {
      opacity: 0;
    }

    .ion-page-hidden {
      display: none !important;
    }
  }

  /* Smooth page content appearance */
  .page-content,
  .content-wrapper,
  ion-content > *:first-child {
    animation: contentFadeIn 0.25s ease-out;
  }

  /* =========================================================================
   * MODAL ANIMATIONS: Fade and slide for modals
   * ========================================================================= */

  /* Modal backdrop fade */
  ion-modal {
    --backdrop-opacity: 0;

    &.show-modal {
      --backdrop-opacity: 0.4;
    }

    ion-backdrop {
      transition: opacity 0.25s ease-out;
    }
  }

  /* Modal content slide and fade */
  ion-modal .modal-wrapper,
  ion-modal::part(content) {
    animation: modalSlideIn 0.3s ease-out;
  }

  /* Modal dismiss animation */
  ion-modal.modal-interactive-dismiss .modal-wrapper {
    animation: modalSlideOut 0.2s ease-in forwards;
  }

  /* Action sheet slide up */
  ion-action-sheet .action-sheet-wrapper {
    animation: actionSheetSlideIn 0.25s ease-out;
  }

  /* Alert fade in */
  ion-alert .alert-wrapper {
    animation: alertFadeIn 0.2s ease-out;
  }

  /* Popover fade and scale */
  ion-popover .popover-content {
    animation: popoverFadeIn 0.2s ease-out;
  }

  /* Toast slide in */
  ion-toast {
    animation: toastSlideIn 0.3s ease-out;
  }

  /* =========================================================================
   * ACCORDION/EXPANDING SECTIONS: Smooth expand/collapse
   * ========================================================================= */

  /* Ionic accordion group animations */
  ion-accordion-group ion-accordion {
    /* Accordion content container */
    .ion-accordion-content {
      transition: max-height 0.3s ease-out, opacity 0.25s ease-out;
      overflow: hidden;
    }

    /* Header icon rotation */
    [slot="header"] ion-icon,
    .accordion-header ion-icon,
    .accordion-toggle-icon {
      transition: transform 0.3s ease-out;
    }

    /* Expanded state */
    &.accordion-expanded,
    &.accordion-expanding {
      [slot="header"] ion-icon,
      .accordion-header ion-icon,
      .accordion-toggle-icon {
        transform: rotate(180deg);
      }
    }
  }

  /* Custom accordion/expandable section animations */
  .expandable-section,
  .collapsible-section,
  .accordion-content,
  .expand-collapse-content {
    transition: max-height 0.3s ease-out, opacity 0.25s ease-out, padding 0.25s ease-out;
    overflow: hidden;

    &.collapsed,
    &.hidden,
    &[hidden] {
      max-height: 0;
      opacity: 0;
      padding-top: 0;
      padding-bottom: 0;
    }

    &.expanded,
    &.visible,
    &:not(.collapsed):not(.hidden):not([hidden]) {
      opacity: 1;
    }
  }

  /* Accordion header hover feedback */
  ion-accordion [slot="header"],
  .accordion-header,
  .expandable-header,
  .collapsible-header {
    transition: background-color 0.2s ease;

    &:hover {
      background-color: rgba(0, 0, 0, 0.04);
    }
  }

  /* =========================================================================
   * STATE CHANGE TRANSITIONS: Smooth visual state changes
   * ========================================================================= */

  /* Show/hide transitions for elements using *ngIf with animations */
  .fade-in {
    animation: fadeIn 0.2s ease-out;
  }

  .fade-out {
    animation: fadeOut 0.2s ease-in;
  }

  .slide-in-up {
    animation: slideInUp 0.3s ease-out;
  }

  .slide-in-down {
    animation: slideInDown 0.3s ease-out;
  }

  .slide-in-left {
    animation: slideInLeft 0.3s ease-out;
  }

  .slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  /* Loading state transitions */
  .loading-overlay,
  .loading-spinner,
  .skeleton-loader {
    transition: opacity 0.2s ease-out;
  }

  /* Content appearing after load */
  .content-loaded {
    animation: contentFadeIn 0.3s ease-out;
  }

  /* Tab/segment content transitions */
  .tab-content,
  .segment-content,
  [role="tabpanel"] {
    animation: tabContentFadeIn 0.25s ease-out;
  }

  /* Form validation state transitions */
  .validation-message,
  .error-message,
  .success-message,
  .warning-message {
    animation: validationSlideIn 0.2s ease-out;
  }

  /* Badge/chip count updates */
  ion-badge,
  .badge,
  .count-badge {
    transition: transform 0.15s ease-out, background-color 0.2s ease;
  }

  /* Progress bar transitions */
  .progress-bar,
  .progress-fill,
  ion-progress-bar {
    transition: width 0.3s ease-out, --progress 0.3s ease-out;
  }

  /* Toggle/switch state transitions */
  ion-toggle::part(track),
  ion-toggle::part(handle) {
    transition: background-color 0.2s ease, transform 0.2s ease;
  }

  /* Checkbox state transitions */
  ion-checkbox::part(container) {
    transition: background-color 0.2s ease, border-color 0.2s ease;
  }

  /* Radio button state transitions */
  ion-radio::part(container) {
    transition: border-color 0.2s ease;
  }

  ion-radio::part(mark) {
    transition: transform 0.2s ease, opacity 0.2s ease;
  }

  /* Input focus transitions */
  ion-input,
  ion-textarea,
  ion-select,
  .styled-input,
  input,
  textarea,
  select {
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
  }

  /* Button state transitions (loading, disabled) */
  ion-button {
    transition: opacity 0.2s ease, transform 0.2s ease, background-color 0.2s ease;

    &.button-disabled,
    &[disabled] {
      transition: opacity 0.2s ease;
    }
  }

  /* List item reorder animations */
  ion-reorder-group ion-item {
    transition: transform 0.2s ease;
  }

  /* Card selection states */
  ion-card,
  .card {
    transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;

    &.selected,
    &.active,
    &[aria-selected="true"] {
      border-color: var(--noble-orange, #F15A27);
      box-shadow: 0 0 0 2px rgba(241, 90, 39, 0.2);
    }
  }

  /* Notification/alert appearance */
  .notification,
  .alert-banner,
  .toast-message {
    animation: notificationSlideIn 0.3s ease-out;
  }

  /* Dropdown/select option animations */
  ion-select-popover ion-item,
  .dropdown-option,
  .select-option {
    transition: background-color 0.15s ease;
  }

  /* Image load transitions */
  img {
    transition: opacity 0.3s ease-in-out;

    &[loading="lazy"] {
      opacity: 0;

      &.loaded {
        opacity: 1;
      }
    }
  }
}

/* ============================================================================
 * G2-UX-002: Keyframe Animations for Smooth Transitions (Web Only)
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* Page transition keyframes */
  @keyframes pageSlideIn {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes contentFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  /* Modal keyframes */
  @keyframes modalSlideIn {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  @keyframes modalSlideOut {
    from {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    to {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
    }
  }

  @keyframes actionSheetSlideIn {
    from {
      opacity: 0;
      transform: translateY(100%);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes alertFadeIn {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes popoverFadeIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes toastSlideIn {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* General utility keyframes */
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes slideInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes tabContentFadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes validationSlideIn {
    from {
      opacity: 0;
      transform: translateY(-5px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes notificationSlideIn {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
}

/* ============================================================================
 * G2-RESP-001: Tablet Breakpoint Optimizations (Web Only)
 * Ensures layouts work well on tablet-sized screens (768px-1024px) with:
 * - No horizontal scrolling at any breakpoint
 * - Touch targets at least 44x44px
 * - Readable text
 * - Properly scaled images
 * Only applies on web - mobile app is not affected.
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* =========================================================================
   * TABLET RANGE (768px - 1024px): Specific optimizations
   * ========================================================================= */
  @media (min-width: 768px) and (max-width: 1024px) {
    /* Prevent horizontal scrolling globally */
    html, body {
      overflow-x: hidden !important;
      max-width: 100vw !important;
    }

    ion-app,
    ion-content,
    .ion-page {
      overflow-x: hidden !important;
      max-width: 100% !important;
    }

    /* =========================================================================
     * GRID LAYOUTS: Reduce minmax values to prevent overflow
     * ========================================================================= */

    /* Form grids - use smaller minmax for tablet */
    .form-grid,
    .form-row,
    .instance-fields,
    .field-grid {
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)) !important;
      gap: 12px !important;
    }

    /* Card/item grids - adjust for tablet viewport */
    .card-grid,
    .item-grid,
    .photo-grid,
    .visual-grid {
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) !important;
      gap: 12px !important;
    }

    /* Service/template grids */
    .services-grid,
    .templates-grid,
    .template-bar-grid {
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
    }

    /* Navigation cards grid */
    .navigation-grid,
    .nav-card-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 12px !important;
    }

    /* PDF preview grids */
    .pdf-grid,
    .pdf-preview-grid,
    .page-thumbnails {
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important;
    }

    /* =========================================================================
     * TOUCH TARGETS: Ensure minimum 44x44px for all interactive elements
     * ========================================================================= */

    /* Buttons - ensure minimum touch target */
    ion-button,
    button,
    .button,
    [role="button"] {
      min-height: 44px !important;
      min-width: 44px !important;
    }

    /* Icon-only buttons */
    ion-button[fill="clear"],
    .icon-button,
    .icon-btn,
    .tool-btn,
    .nav-btn,
    .action-btn,
    .close-btn,
    .back-btn {
      min-height: 44px !important;
      min-width: 44px !important;
      padding: 10px !important;
    }

    /* Tab buttons */
    ion-tab-button {
      min-height: 48px !important;
    }

    /* Segment buttons */
    ion-segment-button {
      min-height: 44px !important;
      --padding-start: 12px;
      --padding-end: 12px;
    }

    /* List items */
    ion-item {
      --min-height: 48px !important;
    }

    /* Checkboxes and toggles - larger touch area */
    ion-checkbox {
      --size: 24px !important;
      min-height: 44px !important;
      min-width: 44px !important;
    }

    ion-toggle {
      min-height: 44px !important;
      min-width: 44px !important;
    }

    /* Form controls */
    ion-select,
    ion-input,
    ion-textarea,
    input,
    textarea,
    select,
    .styled-input {
      min-height: 44px !important;
    }

    /* Chip buttons */
    ion-chip,
    .chip {
      min-height: 36px !important;
      --padding-start: 14px;
      --padding-end: 14px;
    }

    /* Breadcrumb items */
    .breadcrumb-item {
      min-height: 44px !important;
      padding: 8px 12px !important;
    }

    /* Image preview touch targets */
    .image-preview,
    .photo-thumbnail,
    .thumbnail {
      min-height: 44px !important;
      min-width: 44px !important;
    }

    /* Action icons in tables/lists */
    .doc-actions-cell ion-button,
    .action-cell ion-button,
    .row-actions ion-button {
      min-height: 44px !important;
      min-width: 44px !important;
      --padding-start: 8px !important;
      --padding-end: 8px !important;
    }

    /* =========================================================================
     * TYPOGRAPHY: Ensure readable text sizes
     * ========================================================================= */

    /* Minimum body text size */
    body,
    p,
    span,
    div,
    ion-label,
    ion-note {
      font-size: max(14px, 1rem) !important;
    }

    /* Form labels */
    label,
    .form-label,
    .field-label,
    .info-label {
      font-size: max(13px, 0.9rem) !important;
    }

    /* Section titles */
    h1, .h1 {
      font-size: max(24px, 1.5rem) !important;
    }

    h2, .h2, .section-title {
      font-size: max(20px, 1.25rem) !important;
    }

    h3, .h3, .subsection-title {
      font-size: max(18px, 1.125rem) !important;
    }

    /* =========================================================================
     * CONTAINER WIDTHS: Prevent overflow
     * ========================================================================= */

    /* Modal widths for tablet */
    ion-modal {
      --width: min(90vw, 600px) !important;
      --max-width: 90vw !important;
    }

    ion-modal.fullscreen-modal {
      --width: 100% !important;
      --height: 100% !important;
      --max-width: 100% !important;
      --max-height: 100% !important;
      --border-radius: 0 !important;
    }

    ion-modal.fullscreen-modal::part(content) {
      width: 100% !important;
      height: 100% !important;
      max-width: 100% !important;
      max-height: 100% !important;
      border-radius: 0 !important;
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
    }

    /* Alert dialogs */
    ion-alert .alert-wrapper {
      max-width: min(90vw, 450px) !important;
    }

    /* Content containers */
    .content-container,
    .page-container,
    .main-content {
      max-width: 100% !important;
      padding-left: 16px !important;
      padding-right: 16px !important;
    }

    /* Info sections */
    .info-section {
      padding: 16px !important;
    }

    /* =========================================================================
     * TABLES: Responsive table handling
     * ========================================================================= */

    /* Tables should not cause horizontal scroll */
    table,
    .table,
    .documents-table,
    .deliverables-table,
    .services-table {
      table-layout: fixed !important;
      width: 100% !important;
      max-width: 100% !important;
    }

    /* Table cells - allow text wrap */
    td, th {
      word-wrap: break-word !important;
      word-break: break-word !important;
      white-space: normal !important;
    }

    /* Adjust cell widths for tablet */
    .doc-info-cell,
    .field-label-cell {
      width: 35% !important;
    }

    .doc-actions-cell,
    .field-value-cell {
      width: 65% !important;
    }

    /* =========================================================================
     * IMAGES: Proper scaling
     * ========================================================================= */

    /* Responsive images */
    img {
      max-width: 100% !important;
      height: auto !important;
    }

    /* Image containers */
    .image-container,
    .photo-container,
    .preview-container {
      max-width: 100% !important;
      overflow: hidden !important;
    }

    /* Street view header */
    .street-view-header {
      height: 180px !important;
    }

    /* =========================================================================
     * SPACING ADJUSTMENTS
     * ========================================================================= */

    /* Reduce aggressive padding on tablet */
    .info-section,
    .card-content,
    ion-card-content {
      padding: 16px !important;
    }

    /* Service list items */
    .service-header-row {
      padding: 14px !important;
    }

    /* Template bars */
    .template-content {
      padding: 14px 16px !important;
    }
  }
}

/* ============================================================================
 * UNIVERSAL: Additional responsive safeguards (applies to all viewports)
 * Wrapped in web-only media query to not affect mobile app
 * ============================================================================ */
@media (hover: hover) and (pointer: fine) {
  /* Prevent any element from causing horizontal scroll */
  * {
    max-width: 100%;
    box-sizing: border-box;
  }

  /* Allow flex items to shrink to prevent overflow */
  .flex-container,
  .flex-row,
  [class*="flex"] {
    flex-wrap: wrap;
  }

  /* Ensure images never overflow */
  img, video, iframe, embed, object {
    max-width: 100%;
    height: auto;
  }

  /* Pre/code blocks should scroll instead of overflow page */
  pre, code {
    overflow-x: auto;
    max-width: 100%;
  }
}

/* ============================================================================
 * G2-RESP-002: Desktop Layout Optimizations (Web Only)
 * - Side-by-side layouts for larger screens
 * - Multi-column layouts for lists (1200px+)
 * - Reasonable max-width constraints (1200-1400px)
 * - Efficient use of whitespace
 * ============================================================================ */

/* Desktop breakpoint: 1024px+ for side-by-side layouts */
@media (hover: hover) and (pointer: fine) and (min-width: 1024px) {
  /* Increase max-width for main containers on desktop */
  .projects-container,
  .main-container {
    max-width: 1200px;
    padding: 20px 24px;
  }

  /* Side-by-side layout utility classes */
  .desktop-side-by-side {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
  }

  /* Navigation cards in hub pages - 2 columns at 1024px */
  .cards-container.desktop-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }
}

/* Large desktop breakpoint: 1200px+ for multi-column lists */
@media (hover: hover) and (pointer: fine) and (min-width: 1200px) {
  /* Increase max-width for larger screens */
  .projects-container,
  .main-container {
    max-width: 1400px;
    padding: 24px 32px;
  }

  /* Multi-column project lists - auto-fit with min 380px */
  .projects-list.desktop-multi-column {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
    gap: 16px;
  }

  /* Section-based project lists with 2 columns */
  .status-section .projects-list.desktop-multi-column {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  /* Navigation cards - 3 columns on large desktop */
  .cards-container.desktop-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }

  /* Hub navigation cards - optimized grid */
  .hub-cards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
  }
}

/* Extra large desktop: 1400px+ for maximum efficiency */
@media (hover: hover) and (pointer: fine) and (min-width: 1400px) {
  /* Allow slightly wider content on very large screens */
  .projects-container,
  .main-container {
    max-width: 1600px;
  }

  /* Larger gap between columns for better visual separation */
  .projects-list.desktop-multi-column {
    gap: 20px;
  }

  /* 3-column project lists for very wide screens */
  .status-section .projects-list.desktop-multi-column {
    grid-template-columns: repeat(3, 1fr);
  }

  /* 4-column navigation cards on very wide screens */
  .cards-container.desktop-grid-4 {
    grid-template-columns: repeat(4, 1fr);
  }
}

// ==========================================================================
// Global Photo Count Indicator Styles
// Right-aligned photo count in item row - used by EFE and HUD category-detail
// ==========================================================================
.item-photo-indicator {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
  padding-left: 12px;

  .photo-count {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    color: var(--noble-orange, #F15A27);
    font-size: 14px;
    font-weight: 600;

    ion-icon {
      font-size: 18px;
      color: var(--noble-orange, #F15A27);
      display: inline-block;
      min-width: 18px;
    }
  }

  .item-chevron {
    font-size: 20px;
    color: #999;
  }
}

// ==========================================================================
// Global Count Badge Styles (Circle=Info, Square=Limitation, Triangle=Deficiency)
// Used by EFE structural-systems-hub and HUD main page
// ==========================================================================
.category-counts {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 4px;

  .count-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 700;

    // Green CIRCLE for information/comments
    &.info {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      border: 2px solid #28a745;
      color: #28a745;
    }

    // Yellow/Orange SQUARE for limitations
    &.limitation {
      width: 22px;
      height: 22px;
      border-radius: 3px;
      border: 2px solid #f0ad4e;
      color: #f0ad4e;
    }

    // Red TRIANGLE for deficiencies
    // Sized to match 22px circle/square - using SVG for uniform stroke
    &.deficiency {
      width: 24px;
      height: 22px;
      position: relative;
      color: #dc3545;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='22' viewBox='0 0 24 22'%3E%3Cpolygon points='12,2 22,20 2,20' fill='none' stroke='%23dc3545' stroke-width='2' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat center;
      background-size: contain;

      // Number inside triangle - visually centered (pushed down due to pointed top)
      span {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -30%);
        z-index: 1;
        font-size: 10px;
        font-weight: 700;
        line-height: 1;
      }
    }
  }
}

// Global page-level tab bar for pages outside ion-tabs (project-detail, new-project)
// Uses real ion-tab-bar + ion-tab-button components to match the tabs page exactly
// Must be in global.scss because Ionic's .ion-page containment traps fixed elements
app-project-detail,
app-new-project {
  contain: style !important;
}

ion-tab-bar.page-tab-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 100;
  --background: var(--noble-white);
  border-top: 1px solid var(--ion-color-tertiary-shade);
  height: 72px;
  padding-bottom: env(safe-area-inset-bottom);

  .tab-button {
    --color: var(--noble-gray);
    --color-selected: var(--noble-orange);
    --padding-end: 0;
    --padding-start: 0;
    --padding-bottom: 4px;
    --padding-top: 6px;
    --ripple-color: transparent;
    min-height: 60px;
    flex-direction: column;
    gap: 2px;

    .tab-icon {
      font-size: 29px;
      padding: 6px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .tab-label {
      font-size: 11px;
      font-weight: 500;
      text-transform: none;
      letter-spacing: 0.2px;
    }
  }

  ion-tab-button::part(native) {
    padding: 0;
  }
}

