<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>New Project</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form #projectForm="ngForm" (ngSubmit)="createProject()">
    <!-- PROJECT DETAILS Section -->
    <div class="form-section">
      <h3 class="section-title">PROJECT DETAILS</h3>
      
      <ion-item lines="full">
        <ion-label position="stacked">Company</ion-label>
        <ion-select [(ngModel)]="formData.company" name="company" required>
          <ion-select-option value="1">Noble Property Inspections</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item lines="full">
        <ion-label position="stacked">User</ion-label>
        <ion-select [(ngModel)]="formData.user" name="user" required>
          <ion-select-option value="1">Patrick Bullock</ion-select-option>
        </ion-select>
      </ion-item>

      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="stacked">Date of Request</ion-label>
              <ion-input 
                type="date" 
                [(ngModel)]="formData.dateOfRequest" 
                name="dateOfRequest"
                readonly>
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="6">
            <ion-item lines="full">
              <ion-label position="stacked">Service Fee</ion-label>
              <ion-input 
                type="number" 
                [(ngModel)]="formData.fee" 
                name="fee"
                placeholder="265.00"
                step="0.01">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <!-- PROPERTY ADDRESS Section -->
    <div class="form-section">
      <h3 class="section-title">PROPERTY ADDRESS</h3>
      
      <ion-item lines="full">
        <ion-label position="stacked">Street Address</ion-label>
        <ion-input 
          id="address-input"
          type="text" 
          [(ngModel)]="formData.address" 
          name="address"
          placeholder="Start typing an address..."
          required>
        </ion-input>
      </ion-item>

      <ion-grid>
        <ion-row>
          <ion-col size="5">
            <ion-item lines="full">
              <ion-label position="stacked">City</ion-label>
              <ion-input 
                type="text" 
                [(ngModel)]="formData.city" 
                name="city"
                required>
              </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="3">
            <ion-item lines="full">
              <ion-label position="stacked">State</ion-label>
              <ion-select [(ngModel)]="formData.state" name="state" required>
                <ion-select-option *ngFor="let state of states" [value]="state">
                  {{ state }}
                </ion-select-option>
              </ion-select>
            </ion-item>
          </ion-col>
          <ion-col size="4">
            <ion-item lines="full">
              <ion-label position="stacked">ZIP Code</ion-label>
              <ion-input 
                type="text" 
                [(ngModel)]="formData.zip" 
                name="zip"
                pattern="[0-9]{5}"
                maxlength="5">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>

    <!-- INSPECTION DETAILS Section -->
    <div class="form-section">
      <h3 class="section-title">INSPECTION DETAILS</h3>
      
      <ion-item lines="full">
        <ion-label position="stacked">Inspection Date</ion-label>
        <ion-input 
          type="date" 
          [(ngModel)]="formData.inspectionDate" 
          name="inspectionDate"
          required>
        </ion-input>
      </ion-item>
    </div>

    <!-- SERVICES REQUIRED Section -->
    <div class="form-section">
      <h3 class="section-title">SERVICES REQUIRED</h3>
      
      <div class="services-checkboxes">
        <ion-item lines="none" *ngFor="let service of availableServices">
          <ion-checkbox 
            slot="start"
            [value]="service.id"
            (ionChange)="onServiceChange(service.id, $event)">
          </ion-checkbox>
          <ion-label>{{ service.name }}</ion-label>
        </ion-item>
        
        <!-- Static services that are always shown -->
        <ion-item lines="none">
          <ion-checkbox slot="start" value="1">
          </ion-checkbox>
          <ion-label>Engineer's Foundation Evaluation</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="2">
          </ion-checkbox>
          <ion-label>HUD / FHA Engineering Evaluation for Manufactured/Mobile Homes</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="3">
          </ion-checkbox>
          <ion-label>Other</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="4">
          </ion-checkbox>
          <ion-label>Defect Cost Report</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="5">
          </ion-checkbox>
          <ion-label>Engineer's Inspection Review</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="6">
          </ion-checkbox>
          <ion-label>Engineer's Load Bearing Wall Evaluation</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="7">
          </ion-checkbox>
          <ion-label>Engineer's Cost Segregation Analysis</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="8">
          </ion-checkbox>
          <ion-label>Engineer's WDI-8</ion-label>
        </ion-item>
        
        <ion-item lines="none">
          <ion-checkbox slot="start" value="9">
          </ion-checkbox>
          <ion-label>EngineerAFâ„¢ Damaged Shale Evaluation</ion-label>
        </ion-item>
      </div>
    </div>

    <!-- ADDITIONAL INFORMATION Section -->
    <div class="form-section">
      <h3 class="section-title">ADDITIONAL INFORMATION</h3>
      
      <ion-item lines="full">
        <ion-label position="stacked">Notes</ion-label>
        <ion-textarea 
          [(ngModel)]="formData.notes" 
          name="notes"
          rows="4"
          placeholder="Enter any additional notes...">
        </ion-textarea>
      </ion-item>
    </div>

    <!-- Submit Button -->
    <div class="button-container">
      <ion-button 
        expand="block" 
        type="submit" 
        color="primary"
        [disabled]="!projectForm.form.valid">
        Create Project
      </ion-button>
    </div>
  </form>
</ion-content>