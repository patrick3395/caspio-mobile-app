<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()" color="primary">
        <ion-icon name="arrow-back"></ion-icon>
        Back to Projects
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Loading project...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error && !loading" class="error-container">
    <ion-text color="danger">
      <h2>Project Not Found</h2>
      <p>The requested project could not be found.</p>
    </ion-text>
    <ion-button (click)="goBack()" color="primary">Back to Projects</ion-button>
  </div>

  <!-- Project details -->
  <div *ngIf="project && !loading && !error" class="project-container">
    <!-- Street View Header -->
    <div class="street-view-header">
      <img [src]="getStreetViewUrl()" alt="Street View">
    </div>

    <!-- Project Information Section -->
    <div class="info-section">
      <h2 class="section-title">Project Information</h2>
      
      <div class="info-row">
        <span class="info-label">Address:</span>
        <span class="info-value">{{ project.Address || 'Not specified' }}</span>
      </div>
      
      <div class="info-row">
        <span class="info-label">City, State:</span>
        <span class="info-value">{{ getCityState() }}</span>
      </div>
      
      <div class="info-row">
        <span class="info-label">Inspection Date:</span>
        <span class="info-value">{{ formatDate(project.InspectionDate) }}</span>
      </div>
      
      <div class="info-row">
        <span class="info-label">Service Requested:</span>
        <span class="info-value">{{ serviceName || 'Other' }}</span>
      </div>
    </div>

    <!-- Required Documents Section -->
    <div class="info-section">
      <h2 class="section-title">Required Documents</h2>
      
      <div class="documents-table">
        <div class="doc-header">
          <div class="doc-col">Document</div>
          <div class="doc-col">Status</div>
          <div class="doc-col">Action</div>
        </div>
        
        <div class="doc-row">
          <div class="doc-col">Home Inspection Report</div>
          <div class="doc-col">
            <span class="status-badge status-required">Required</span>
          </div>
          <div class="doc-col">
            <ion-button size="small" fill="solid" color="primary" (click)="uploadDocument('InspectionReport')">
              Upload
            </ion-button>
          </div>
        </div>
        
        <div class="doc-row">
          <div class="doc-col">Cubicasa</div>
          <div class="doc-col">
            <span class="status-badge status-uploaded">Uploaded</span>
          </div>
          <div class="doc-col">
            <ion-button size="small" fill="solid" color="primary" (click)="viewDocument('Cubicasa')">
              View
            </ion-button>
          </div>
        </div>
        
        <div class="doc-row">
          <div class="doc-col">Support Document 1</div>
          <div class="doc-col">
            <span class="status-badge status-optional">Optional</span>
          </div>
          <div class="doc-col">
            <ion-button size="small" fill="solid" color="primary" (click)="uploadDocument('SupportDocument1')">
              Upload
            </ion-button>
          </div>
        </div>
        
        <div class="doc-row">
          <div class="doc-col">Support Document 2</div>
          <div class="doc-col">
            <span class="status-badge status-optional">Optional</span>
          </div>
          <div class="doc-col">
            <ion-button size="small" fill="solid" color="primary" (click)="uploadDocument('SupportDocument2')">
              Upload
            </ion-button>
          </div>
        </div>
      </div>
    </div>

    <!-- Templates Section -->
    <div class="info-section">
      <h2 class="section-title">Templates</h2>
      
      <div class="templates-table">
        <div class="template-row">
          <div class="template-col">Service Template</div>
          <div class="template-col">Action</div>
        </div>
        
        <div class="template-row">
          <div class="template-col">{{ serviceName || 'Other' }}</div>
          <div class="template-col">
            <ion-button size="small" fill="solid" color="success" (click)="openTemplate()">
              Open Template
            </ion-button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>