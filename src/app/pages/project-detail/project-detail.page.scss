// Noble Property Inspections Brand Colors
$orange: var(--noble-orange, #F15A27);
$gray: var(--color-text-secondary);
$light-gray: var(--color-bg-page);
$border: var(--color-border-default);
$dark: var(--color-text-primary);
$white: var(--color-bg-card);

// MOBILE-SPECIFIC FIXES for Add Document Modal
@media (max-width: 768px) {
  // Enhance modal close button visibility on mobile
  ion-modal ion-header ion-buttons {
    ion-button {
      --color: var(--color-text-primary) !important;
      font-size: 24px !important;
      padding: 8px !important;

      ion-icon {
        font-size: 28px !important;
        font-weight: bold !important;
      }
    }
  }
}

// Header styling with transparent background and orange back button
// Scoped to .page-header to avoid leaking into modal headers
ion-header.page-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10;
  background: transparent !important;
  box-shadow: none !important;

  &::after {
    display: none !important;
  }

  &::part(header) {
    box-shadow: none !important;
    border: none !important;
  }

  ion-toolbar {
    --background: transparent;
    --color: $dark;
    --border-width: 0 !important;
    --ion-toolbar-border-width: 0 !important;
    --border-style: none !important;
    --border-color: transparent !important;
    --box-shadow: none !important;
    backdrop-filter: none;
    box-shadow: none !important;
    background: transparent !important;
    border: none !important;

    &::after {
      display: none !important;
    }

    &::before {
      display: none !important;
    }

    &::part(container) {
      border: none !important;
      box-shadow: none !important;
    }

    ion-title {
      font-weight: 600;
      color: $dark;
    }

    // Target only the back button specifically
    ion-buttons[slot="start"] ion-button {
      --color: white !important;
      --background: $orange !important;
      --background-hover: $orange !important;
      --background-activated: $orange !important;
      --background-focused: $orange !important;
      --padding-start: 0 !important;
      --padding-end: 0 !important;
      --padding-top: 0 !important;
      --padding-bottom: 0 !important;
      --ripple-color: transparent !important;
      border-radius: 4px !important;
      width: 40px !important;
      height: 40px !important;
      min-width: 40px !important;
      min-height: 40px !important;
      box-shadow: 0 2px 8px rgba(241, 90, 39, 0.3) !important;
      background: $orange !important;
      margin: 0 !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      transition: none !important;
      -webkit-tap-highlight-color: transparent !important;

      ion-icon {
        color: white !important;
        font-size: 24px !important;
        margin: 0 !important;
      }

      &:active {
        transform: none !important;
        background: $orange !important;
      }
    }

    ion-button[slot="end"] {
      --background: transparent;
      --color: $dark;

      ion-icon {
        color: $dark;
        font-size: 24px;
      }
    }
  }
}

ion-content{--padding-start:0;--padding-end:0;--padding-top:0;--padding-bottom:0}

// Add bottom padding for fixed tab bar
ion-content { --padding-bottom: 80px !important; }

.error-container{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;padding:20px}

.project-skeleton{display:grid;gap:16px;padding:16px;background:$light-gray;}
.project-skeleton .skeleton-hero{height:200px;border-radius:16px;}
.project-skeleton .skeleton-section{background:$white;border-radius:12px;padding:16px;display:grid;gap:12px;box-shadow:0 2px 6px var(--color-shadow);}
.project-skeleton .skeleton-title{width:40%;height:18px;}
.project-skeleton .skeleton-row{display:grid;grid-template-columns:120px 1fr;gap:12px;}
.project-skeleton .skeleton-label,.project-skeleton .skeleton-value{height:14px;}


// Template loading popup
::ng-deep .template-loading {
  .loading-wrapper {
    background: rgba(0, 0, 0, 0.85);
    border-radius: 12px;
    padding: 20px 30px;
    
    .loading-content {
      color: white;
      font-size: 16px;
      font-weight: 500;
    }
    
    .loading-spinner {
      margin-bottom: 10px;
      
      .spinner-crescent {
        color: $orange;
      }
    }
  }
}

// Read-only banner
.read-only-banner {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
  background: rgba(var(--ion-background-color-rgb), 0.9);
  color: var(--color-text-primary);
  padding: 12px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  font-size: 14px;
  font-weight: 600;

  .read-only-content {
    display: flex;
    align-items: center;
    gap: 10px;

    ion-icon {
      font-size: 20px;
    }
  }

  .reactivate-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    background: transparent;
    color: var(--noble-orange, #F15A27);
    border: none;
    border-radius: 20px;
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px var(--color-shadow-heavy);

    ion-icon {
      font-size: 18px;
    }

    &:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 8px var(--color-shadow-heavy);
    }

    &:active {
      transform: scale(0.98);
    }
  }
}

.street-view-header{width:100%;height:200px;overflow:hidden;background:$light-gray;padding-top:var(--ion-safe-area-top,0px);
img{width:100%;height:100%;object-fit:cover}}

// Project container - full width
.project-container {
  width: 100%;
  padding: 0 16px;
}

.info-section{padding:20px;background:$white;margin-bottom:10px;border-bottom:1px solid $border;
.section-title{font-size:18px;font-weight:600;color:$dark;margin:0 0 15px 0;padding-bottom:10px;border-bottom:2px solid $orange}
.section-button-area{margin-bottom:15px;
ion-button{--padding-start:12px;--padding-end:12px;font-size:14px}}
.section-header-with-button{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;
.section-title{margin:0 0 15px 0;padding-bottom:10px;border-bottom:2px solid $orange}
ion-button{--padding-start:12px;--padding-end:12px;font-size:14px}}
.section-header-with-total{display:flex;justify-content:space-between;align-items:center;margin-bottom:0;
.section-title{margin:0;padding-bottom:0;border-bottom:none;flex:1}
.header-total{font-size:18px;font-weight:600;color:$dark;white-space:nowrap;margin-left:20px}
.header-total-with-button{display:flex;align-items:center;gap:12px;flex-wrap:wrap;
.header-total{margin-left:0}}
@media (max-width: 768px) {
  flex-wrap:wrap;gap:8px;
  .header-total-with-button{gap:8px}
}}
.section-divider{width:100%;height:2px;background:$orange;margin-bottom:15px;margin-top:10px}}

.address-row {
  position: relative;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.edit-address-btn-inline {
  background: transparent;
  border: none;
  padding: 2px 4px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  margin-left: 4px;
  vertical-align: middle;

  ion-icon {
    font-size: 14px;
    color: var(--color-text-muted);
  }

  &:hover {
    ion-icon {
      color: $orange;
    }
  }

  &:active {
    transform: scale(0.9);
  }
}

.pay-now-btn {
  background: var(--ion-color-primary);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
  white-space: nowrap;

  @media (hover: hover) and (pointer: fine) {
    &:hover {
      background: var(--ion-color-primary-shade);
      transform: translateY(-1px);
      box-shadow: 0 2px 8px var(--color-shadow-heavy);
    }
  }

  &:active {
    transform: translateY(0);
  }

  ion-icon {
    font-size: 18px;
  }
}

// Responsive styling for mobile
@media (max-width: 768px) {
  .pay-now-btn {
    padding: 6px 12px;
    font-size: 12px;

    ion-icon {
      font-size: 16px;
    }
  }
}

// Reports header with sync/save buttons
.reports-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
  margin-bottom: 15px;
  border-bottom: 2px solid $orange;

  .section-title {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
    border-bottom: none !important;
    flex: 1;
  }
}

// PDF button
.pdf-btn {
  background: #e0e0e0;
  color: #666;
  border: 1px solid #ccc;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.2s ease;
  white-space: nowrap;

  ion-icon {
    font-size: 16px;
  }

  @media (hover: hover) and (pointer: fine) {
    &:hover {
      background: #d0d0d0;
      color: #444;
    }
  }
}

// Sync/Save buttons
.sync-save-buttons {
  display: flex;
  gap: 8px;
}

.sync-btn,
.save-btn {
  background: $white;
  color: $orange;
  border: 1px solid $orange;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 13px;
  font-weight: 500;
  transition: all 0.2s ease;
  white-space: nowrap;

  ion-icon {
    font-size: 16px;

    &.spinning {
      animation: spin 1s linear infinite;
    }
  }

  @media (hover: hover) and (pointer: fine) {
    &:hover:not(:disabled) {
      background: $orange;
      color: $white;
    }
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

// Mobile responsive for sync/save buttons
@media (max-width: 480px) {
  .sync-save-buttons {
    gap: 4px;
  }

  .sync-btn,
  .save-btn {
    padding: 4px 8px;

    ion-icon {
      font-size: 18px;
    }
  }
}

h3 {
  font-size: 16px;
  font-weight: 600;
  margin: 16px 0 12px 0;
}

.info-row {
  display: flex;
  padding: 8px 0;

  .info-label {
    font-weight: 500;
    color: $gray;
    width: 140px;
  }

  .info-value {
    color: $dark;
    flex: 1;

    &.company-name {
      font-weight: 500;
    }
  }
}

.info-row-single {
  display: flex;
  align-items: baseline;
  padding: 8px 0;
  flex-wrap: wrap;
  gap: 8px;

  .info-label {
    font-weight: 500;
    color: $gray;
    white-space: nowrap;

    &.address-label {
      margin-left: 12px;
    }
  }

  .info-value {
    color: $dark;

    &.company-name {
      font-weight: 500;
    }
  }
}

// Services tab segment toggle (matches Company/Partners tab style)
.services-segment {
  margin-bottom: 16px;
  --background: var(--color-bg-page) !important;
  border-radius: 12px;
  padding: 4px;

  ion-segment-button {
    --color: var(--color-text-secondary) !important;
    --color-checked: #f15a27 !important;
    --background-checked: transparent !important;
    --indicator-color: var(--color-bg-card) !important;
    --indicator-height: 100%;
    --indicator-box-shadow: 0 2px 8px var(--color-shadow);
    text-transform: none;
    font-weight: 600;
    font-size: 15px;
    min-height: 44px;
    border-radius: 10px;
    --border-radius: 10px;

    &::part(indicator) {
      border-radius: 10px;
    }

    &.segment-button-checked {
      font-weight: 600;
    }
  }
}

// Empty state for services tabs
.services-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
  color: var(--color-text-muted);
  text-align: center;

  ion-icon {
    font-size: 48px;
    margin-bottom: 12px;
    opacity: 0.5;
  }

  p {
    font-size: 16px;
    font-weight: 600;
    margin: 0 0 4px;
    color: var(--color-text-secondary);
  }

  span {
    font-size: 14px;
  }
}

// Unified expandable services list
.services-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 16px;
}

.service-list-item {
  border: 1px solid $border;
  border-radius: 8px;
  overflow: hidden;
  background: $white;
  transition: border-color 0.2s ease;
  
  &.has-selection {
    border: 2px solid var(--color-border-heavy);
  }
  
  .service-header-row {
    display: flex;
    align-items: center;
    padding: 16px;
    cursor: pointer;
    background: $white;
    transition: background 0.2s ease;

    @media (max-width: 768px) {
      padding: 12px;
    }

    @media (hover: hover) and (pointer: fine) {
      &:hover {
        background: $light-gray;
      }
    }

    &.selected {
      background: $white;
      border-bottom: 1px solid $border;
      
      .service-toggle {
        display: none;
      }
      
      .service-name {
        font-weight: 700;
      }
    }
    
    .service-name {
      flex: 1;
      font-size: 18px;
      font-weight: 600;
      color: $dark;
      min-width: 0;

      @media (max-width: 768px) {
        font-size: 15px;
      }
    }
    
    .service-controls-inline {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-right: 12px;
      
      ion-button {
        --padding-start: 4px;
        --padding-end: 4px;
        height: 32px;
        width: 32px;
        
        ion-icon {
          font-size: 24px;
          color: $orange;
        }
        
        &:disabled {
          opacity: 0.4;
        }
      }
      
      .count-display {
        font-size: 18px;
        font-weight: 600;
        color: $dark;
        min-width: 24px;
        text-align: center;
      }
      
      // Mobile-only: Make controls smaller for more space
      @media (max-width: 768px) {
        gap: 4px;
        margin-right: 8px;
        
        ion-button {
          height: 24px;
          width: 24px;
          --padding-start: 2px;
          --padding-end: 2px;
          
          ion-icon {
            font-size: 18px;
          }
        }
        
        .count-display {
          font-size: 13px;
          min-width: 18px;
        }
      }
    }
    
    .service-toggle {
      display: flex;
      align-items: center;

      ion-icon {
        font-size: 24px;
        color: $dark;
      }
    }
  }
  
  .service-details {
    padding: 16px;
    background: $light-gray;
    border-top: 1px solid $border;

    @media (max-width: 768px) {
      padding: 12px 10px;
    }

    .service-number-header {
      font-size: 13px;
      font-weight: 600;
      color: $dark;
      margin-bottom: 6px;
      padding: 2px 6px;
      text-align: left;
      opacity: 0.7;
      letter-spacing: 0.3px;
    }

    .instance-fields {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;

      @media (max-width: 576px) {
        grid-template-columns: 1fr;
      }

      .field-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
        position: relative;

        label {
          font-size: 13px;
          font-weight: 600;
          color: $gray;
          text-transform: uppercase;
          letter-spacing: 0.5px;

          @media (max-width: 768px) {
            font-size: 12px;
          }
        }

        .date-input {
          padding: 10px 12px;
          border: 1px solid $border;
          border-radius: 4px;
          font-size: 16px;
          background: $white;
          height: 44px;
          box-sizing: border-box;

          @media (max-width: 768px) {
            font-size: 14px;
            height: 40px;
            padding: 8px 10px;
          }
          text-align: center;

          &:focus {
            outline: none;
          }

          &:disabled, &:read-only {
            background: $light-gray;
            color: $gray;
          }
        }

        .price-display {
          padding: 10px 12px;
          background: $light-gray;
          border: 1px solid $border;
          border-radius: 4px;
          font-size: 16px;
          font-weight: 400;
          color: $dark;
          height: 44px;
          box-sizing: border-box;

          @media (max-width: 768px) {
            font-size: 14px;
            height: 40px;
            padding: 8px 10px;
          }
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .price-input-wrapper {
          display: flex;
          align-items: center;
          justify-content: center;
          border: 1px solid $border;
          border-radius: 4px;
          background: $white;
          height: 44px;
          box-sizing: border-box;
          overflow: hidden;

          .price-prefix {
            padding-left: 12px;
            font-size: 16px;
            color: $gray;
            flex-shrink: 0;
          }

          .date-input {
            border: none;
            padding: 10px 12px 10px 4px;
            height: 100%;
            flex: 1;
            min-width: 0;
            text-align: center;

            &:focus {
              outline: none;
            }
          }
        }

        .saving-indicator, .saved-indicator {
          position: absolute;
          right: 10px;
          top: 30px;
        }
      }
    }

    .service-reports-section,
    .service-documents-section {
      margin-top: 16px;

      .sub-section-title {
        font-size: 17px;
        font-weight: 600;
        color: $dark;
        margin: 0 0 12px 0;
        padding-bottom: 8px;
        border-bottom: 2px solid $orange;

        @media (max-width: 768px) {
          font-size: 15px;
          margin: 0 0 8px 0;
        }
      }
    }

    .submit-button-container {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      margin-top: 16px;
      padding-top: 12px;

      .submit-report-btn {
        background: #9ca3af; // Gray by default
        color: white;
        border: none;
        padding: 10px 28px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 15px;
        font-weight: 600;
        transition: all 0.2s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        opacity: 0.8;

        // Gray button hover effect
        @media (hover: hover) and (pointer: fine) {
          &:not(.finalized):hover {
            opacity: 0.9;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px var(--color-shadow-heavy);
          }
        }

        &.finalized {
          background: $orange;
          cursor: pointer;
          opacity: 1;

          @media (hover: hover) and (pointer: fine) {
            &:hover {
              background: rgba(241, 90, 39, 0.9);
              transform: translateY(-1px);
              box-shadow: 0 2px 8px rgba(241, 90, 39, 0.3);
            }
          }

          &:active {
            transform: translateY(0);
          }
        }
      }

      .submitted-note {
        margin-top: 8px;
        padding: 6px 12px;
        background: rgba(241, 90, 39, 0.1);
        border-radius: 4px;
        color: $orange;
        font-size: 13px;
        font-weight: 600;
        border: 1px solid $orange;
      }
    }
  }
}

// Optional Documents Modal - Sleek and production-ready styling
ion-modal {
  
  &::part(content) {
    border-radius: 16px 16px 0 0; // Rounded top corners
    max-width: 600px;
    margin: 0 auto;
  }
  
  ion-header ion-toolbar {
    --background: var(--color-bg-page);
    --color: var(--color-text-primary);
    --padding-top: 16px;
    --padding-bottom: 16px;
    --min-height: 64px;

    &.centered-title-toolbar ion-title {
      position: absolute;
      left: 0;
      right: 0;
      text-align: center;
      pointer-events: none;
    }

    ion-title {
      color: var(--color-text-primary);
      font-weight: 600;
      font-size: 18px;
    }

    ion-button {
      --color: var(--color-text-primary);
    }
  }
  
  ion-content {
    --background: var(--color-bg-elevated);
    
    ion-list {
      background: transparent;
      padding: 16px;
      
      ion-item {
        --background: var(--color-bg-card);
        --border-radius: 12px;
        --padding-start: 20px;
        --padding-end: 20px;
        --min-height: 80px;
        margin-bottom: 12px;
        border-radius: 12px;
        box-shadow: 0 2px 8px var(--color-shadow);
        transition: all 0.2s ease;
        cursor: pointer;

        @media (hover: hover) and (pointer: fine) {
          &:hover {
            box-shadow: 0 4px 12px var(--color-shadow-heavy);
            transform: translateY(-1px);
          }
        }

        ion-label {
          margin: 14px 0 !important;
          white-space: normal !important; // Allow text wrapping
          
          h2 {
            font-size: 16px !important;
            font-weight: 600 !important;
            color: var(--color-text-primary) !important;
            margin: 0 0 8px 0 !important;
            line-height: 1.4 !important;
            white-space: normal !important; // Allow title wrapping
            word-wrap: break-word !important;
          }
          
          p {
            font-size: 13px !important;
            color: var(--color-text-secondary) !important;
            margin: 0 !important;
            line-height: 1.4 !important;
            font-weight: 500 !important;
          }
        }
      }
      
      ion-item-divider {
        --background: transparent;
        --padding-start: 4px;
        --padding-end: 4px;
        --min-height: 44px;
        border: none;
        margin: 24px 0 16px 0;
        
        ion-label {
          font-size: 14px !important;
          font-weight: 700 !important;
          color: var(--color-text-secondary) !important;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }
      }
    }
  }
}

// Documents table styling to match Selected Services table theme
.documents-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;
  border: 1px solid $border;
  border-radius: 8px;
  overflow: hidden;
  margin-top: 10px;
  background: $white;
  max-width: 100%;

  tbody {
    &:not(:last-child) {
      border-bottom: 1px solid $border;
    }
  }

  td {
    border-right: 1px solid $border;
    border-bottom: 1px solid $border;
    padding: 14px;
    font-size: 16px;
    vertical-align: middle;

    &:last-child {
      border-right: none;
    }

    @media (max-width: 768px) {
      padding: 10px 8px;
      font-size: 14px;
    }
  }

  tr:last-child td {
    border-bottom: none;
  }

  .service-header {
    background: $light-gray;
    font-weight: 600;
    color: $dark;
    font-size: 16px;
    padding: 18px 14px;

    .instance-number {
      margin-left: 8px;
      font-weight: 600;
      color: $dark;
      font-size: 16px;
    }
  }

  .doc-info-cell {
    width: 70%;
    border-right: none;
    overflow: hidden;
    min-width: 0;
  }

  .doc-actions-cell {
    width: 30%;
    border-left: none;
    text-align: right;
    white-space: nowrap;
    vertical-align: middle;

    ion-button {
      --padding-start: 2px;
      --padding-end: 2px;
      margin: 0 2px;
      display: inline-block;
      vertical-align: middle;

      .button-text {
        font-size: 11px;
        margin-left: 4px;
        font-weight: 500;
      }

      ion-icon {
        font-size: 22px;
        color: $dark;
      }

      &.orange-icon {
        ion-icon {
          color: #F15A27;
        }
      }
    }

    .no-docs-text {
      font-size: 13px;
      color: var(--color-text-muted);
    }

    @media (max-width: 768px) {
      ion-button {
        --padding-start: 1px;
        --padding-end: 1px;
        margin: 0 1px;

        ion-icon {
          font-size: 18px;
        }
      }
    }
  }

  .doc-title {
    font-weight: 500;
    font-size: 16px;
    color: var(--color-text-primary);
    margin-bottom: 2px;
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    display: block;

    @media (max-width: 768px) {
      font-size: 14px;
    }
  }

  .doc-filename {
    font-size: 13px;
    color: var(--color-text-secondary);
    word-wrap: break-word;
    word-break: break-word;
    white-space: normal;
    display: block;
  }
  .doc-status {
    font-size: 13px;
    color: var(--color-text-muted);
  }

  .support-doc-row.doc-row {
    background: $white;
  }

  .support-doc-row.doc-row.pending {
    background: $white;  // Same as other rows (removed light orange background)
  }

  .support-doc-row.doc-row.no-docs {
    background: $white;
  }

  .support-doc-row.add-row {
    background: $white;
    border-top: 1px solid $border;
    
    .doc-info-cell {
      white-space: nowrap;
      overflow: visible;
      
      // Mobile-only: Allow text to extend into actions column
      @media (max-width: 768px) {
        width: 85%;
      }
    }
    
    .doc-actions-cell {
      @media (max-width: 768px) {
        width: 15%;
      }
    }
  }

  .add-doc-link {
    color: #F15A27;  // Orange theme color
    font-weight: 600;
    font-size: 15px;
    text-decoration: none;
    cursor: pointer;
    display: inline-block;

    @media (max-width: 768px) {
      font-size: 13px;
    }
  }

  .add-doc-link.disabled {
    color: var(--color-text-muted);
    cursor: default;
    pointer-events: none;
  }

  .add-link-separator {
    color: var(--color-text-muted);
    margin: 0 6px;
    font-weight: 400;
    display: inline-block;
  }

  .add-doc-actions {
    min-width: 40px;
  }
}
.template-header{display:grid;background:$light-gray;font-weight:600;font-size:14px;border-bottom:2px solid $border;
>div{padding:12px;display:flex;align-items:center}}
.template-header{grid-template-columns:2fr 1fr 1fr}

.template-row{display:grid;border-bottom:1px solid $border;
>*{padding:12px;font-size:14px}}
.doc-title{word-break:break-word;min-width:0;
.doc-title-content{display:flex;flex-direction:column;gap:4px;word-break:break-word;min-width:0}
.uploaded-text{
  color:#28a745;
  font-weight:600;
  display:flex;
  align-items:center;
  gap:6px;
  
  .upload-check{
    color:#28a745;
    font-size:18px;
  }
}
.doc-link-name{
  font-size:12px;
  color:$gray;
  display:flex;
  align-items:center;
  gap:4px;
  padding-left:24px;
  
  ion-icon{
    font-size:14px;
    color:$gray;
  }
}
.doc-subtitle{margin-top:2px}
.remove-doc-link{color:$orange;font-size:10px;cursor:pointer;text-decoration:none}}
.doc-content{
  padding: 12px;
  
  .sleek-upload-btn {
    display: inline-flex;
    align-items: center;
    margin-top: 4px;
    margin-bottom: 0;
    --padding-start: 8px;
    --padding-end: 12px;
    font-size: 13px;
    height: 28px;
    --border-width: 0;
    --box-shadow: none;
    opacity: 0.8;
    transition: opacity 0.2s;

    @media (hover: hover) and (pointer: fine) {
      &:hover {
        opacity: 1;
      }
    }

    ion-icon {
      font-size: 16px;
      margin-right: 4px;
    }
  }
  
  .sleek-upload-additional-btn {
    display: inline-flex;
    align-items: center;
    margin-top: 4px;
    margin-left: 18px; // Align with document icon above
    width: fit-content;
    --padding-start: 8px;
    --padding-end: 12px;
    font-size: 13px;
    height: 28px;
    --border-width: 0;
    --box-shadow: none;
    opacity: 0.8;
    transition: opacity 0.2s;

    @media (hover: hover) and (pointer: fine) {
      &:hover {
        opacity: 1;
      }
    }

    ion-icon {
      font-size: 16px;
      margin-right: 4px;
    }
  }
  
  .uploaded-doc-info {
    margin-top: 8px;
    
    .doc-info-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 0;
      border-bottom: 1px solid var(--color-border-light);
      
      &:last-child {
        border-bottom: none;
      }
      
      .doc-link-name {
        display: flex;
        align-items: center;
        gap: 6px;
        color: var(--color-text-primary);
        font-size: 13px;
        flex: 1;
        min-width: 0; // Allow flex item to shrink below content size
        max-width: calc(100% - 100px); // Reserve space for action buttons
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;

        ion-icon {
          font-size: 16px;
          color: var(--color-text-secondary);
          flex-shrink: 0; // Prevent icon from shrinking
        }
      }
      
      .doc-icon-actions {
        display: flex;
        gap: 4px;
        flex-shrink: 0; // Prevent buttons from shrinking
        
        ion-button {
          --padding-start: 4px;
          --padding-end: 4px;
          margin: 0;
          height: 28px;
        }
      }
    }
  }
}
.doc-header{display:grid;grid-template-columns:30% 70%;background:$light-gray;font-weight:600;font-size:14px;border-bottom:2px solid $border;
>div{padding:12px}
>div:nth-child(1){padding-left:12px}}
.service-doc-group{position:relative;display:grid;grid-template-columns:30% 70%;grid-auto-rows:minmax(48px,auto);
&:not(:last-child){border-bottom:2px solid $border}
.doc-row{display:contents}
.doc-service{grid-column:1;border-left:3px solid #007bff;padding-left:12px;background:var(--color-bg-elevated);font-weight:600;display:flex;align-items:center;justify-content:flex-start}
.doc-service-placeholder{display:none}
.doc-row>div:nth-child(2){border-bottom:1px solid var(--color-border-default)}
.doc-row:last-child>div:nth-child(2){border-bottom:none}}
.add-doc-row{background:var(--color-bg-elevated);display:contents;
>div{padding:10px 12px;background:var(--color-bg-elevated)}
>div:nth-child(2){text-align:left;padding-left:12px;grid-column:2}
>div:first-child{display:none}}

// Templates Progress Bars
.templates-container{display:flex;flex-direction:column;gap:12px;margin-top:16px}

.template-bar{position:relative;min-height:72px;background:$white;border:1px solid $border;border-radius:4px;overflow:hidden;cursor:pointer;box-shadow:0 2px 4px var(--color-shadow);user-select:none;-webkit-tap-highlight-color:transparent;touch-action:manipulation;
@media (hover: hover) and (pointer: fine) {
  &:hover{box-shadow:0 4px 8px var(--color-shadow-heavy)}
}
@media (max-width: 768px) {
  min-height:auto;
}}

.template-progress{position:absolute;top:0;left:0;height:100%;background:linear-gradient(90deg,#4ade80,#22c55e);opacity:0.15}

.template-content{position:relative;z-index:1;min-height:72px;display:flex;align-items:center;justify-content:space-between;padding:14px 20px;
// Mobile-only: Better vertical padding for wrapped text
@media (max-width: 768px) {
  padding:12px;padding-right:14px;
  min-height:auto;flex-wrap:wrap;gap:8px;
}}

.template-name{font-size:18px;font-weight:600;color:$dark;display:flex;align-items:center;gap:14px;flex:1;min-width:0;
.report-icon{width:32px;height:32px;object-fit:contain;flex-shrink:0;}
.report-icon-fallback{width:32px;height:32px;flex-shrink:0;color:$gray;font-size:28px;}
.service-title{flex:1;min-width:0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.3;}
@media (max-width: 768px) {
  font-size:15px;gap:10px;
  .report-icon{width:26px;height:26px;}
  .report-icon-fallback{width:26px;height:26px;font-size:22px;}
}
.finalized-check{color:$orange;font-size:20px;flex-shrink:0;margin-left:6px;}
.template-instance{font-weight:400;color:$gray;font-size:14px;white-space:nowrap;flex-shrink:0;margin-left:4px}}

// Status container positioned at top right corner
.report-status-container{position:absolute;top:12px;right:20px;display:flex;flex-direction:column;align-items:flex-end;gap:3px;
.report-status{font-weight:600;color:$orange;font-size:15px;white-space:nowrap;}
.status-datetime{font-weight:500;color:$gray;font-size:12px;white-space:nowrap;text-align:right;}
@media (max-width: 768px) {
  position:static;display:flex;flex-direction:row;align-items:center;gap:6px;margin-left:auto;flex-shrink:0;
  .report-status{font-size:12px;}
  .status-datetime{font-size:10px;}
}}

.template-icons{display:flex;align-items:center;gap:8px;flex-shrink:0;margin-left:auto;}

.finalized-check-report{color:$orange;font-size:22px;flex-shrink:0;
@media (max-width: 768px) {
  font-size:20px;
}}

.status-arrow{color:$orange;font-size:20px;flex-shrink:0;
@media (max-width: 768px) {
  font-size:18px;
}}

.template-status{display:flex;align-items:center;gap:20px;
.template-percentage{
  font-size:11px;
  font-weight:600;
  padding:3px 10px;
  border-radius:12px;
  min-width:35px;
  text-align:center;
  transition:all 0.3s ease;
  display:inline-block;
  
  &.complete{
    background:linear-gradient(135deg, #28a745 0%, #20c047 100%);
    color:white;
  }
  &.high{
    background:linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
    color:white;
  }
  &.medium{
    background:linear-gradient(135deg, #FFA726 0%, #FB8C00 100%);
    color:white;
  }
  &.low{
    background:linear-gradient(135deg, #ffd700 0%, #ffcc00 100%);
    color:#1a1a1a;
  }
  &.empty{
    background:linear-gradient(135deg, var(--color-bg-inset) 0%, var(--color-border-default) 100%);
    color:var(--color-text-secondary);
  }
}
.template-action{font-size:13px;color:$gray;padding:6px 12px;background:$light-gray;border-radius:20px;font-weight:500}}


.remove-doc-link{color:#007bff;text-decoration:none;font-size:12px;cursor:pointer}
.add-doc-link{color:$dark;text-decoration:none;font-size:12px;cursor:pointer;font-weight:500}
.remove-doc-link{color:$orange;margin-left:10px}

// Removed service-item.has-documents - no green in service selector

// Uploaded document info
.uploaded-doc-info {
  margin-top: 4px;
  padding: 6px 0;
  background: transparent;
  border-radius: 0;
  border: none;
  
  .doc-info-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .doc-link-name {
    display: flex;
    align-items: center;
    gap: 4px;
    font-size: 12px;
    color: var(--color-text-secondary);
    font-style: italic;
    padding-left: 24px; // Indent to show it's under the document title
    flex: 1;

    ion-icon {
      font-size: 16px;
      color: #3b82f6;
    }
  }
  
  .doc-icon-actions {
    display: flex;
    gap: 4px;
    align-items: center;
    
    ion-button {
      --padding-start: 4px;
      --padding-end: 4px;
      margin: 0;
      height: 28px;
      width: 28px;
      
      ion-icon {
        font-size: 18px;
      }
    }
  }
}

ion-button{--padding-start:8px;--padding-end:8px;font-size:12px;text-transform:none}

// Fullscreen modal for document viewer
::ng-deep .fullscreen-modal {
  --width: 100%;
  --height: 100%;
  --max-width: 100%;
  --max-height: 100%;

  .modal-wrapper {
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
  }
}

// Notes section
.notes-container {
  position: relative;

  .notes-textarea {
    width: 100%;
    min-height: 200px;
    padding: 12px;
    border: 1px solid $border;
    border-radius: 8px;
    font-size: 14px;
    font-family: inherit;
    line-height: 1.5;
    resize: vertical;
    background: $white;
    color: $dark;

    &:focus {
      outline: none;
    }

    &:disabled, &:read-only {
      background: $light-gray;
      color: $gray;
      cursor: not-allowed;
    }

    &::placeholder {
      color: var(--color-text-muted);
    }
  }

  .saving-indicator, .saved-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 8px;
    font-size: 13px;
    color: $gray;

    ion-spinner {
      width: 16px;
      height: 16px;
    }
  }

  .saved-indicator {
    color: #28a745;

    ion-icon {
      font-size: 18px;
    }
  }
}

// Deliverables table styling (matches Support Documents layout)
.deliverables-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;
  border: 1px solid $border;
  border-radius: 8px;
  overflow: hidden;
  margin-top: 10px;
  background: $white;

  tbody.deliverable-group {
    &:not(:last-child) {
      border-bottom: 2px solid $border;
    }
  }

  .deliverable-row {
    &:last-child {
      border-bottom: none;
    }

    td {
      padding: 12px;
      vertical-align: top;
    }

    // Service header row styling
    &.service-row {
      background: $light-gray;

      &.clickable {
        cursor: pointer;
        transition: background 0.2s ease;

        @media (hover: hover) and (pointer: fine) {
          &:hover {
            background: var(--color-shadow);
          }
        }
      }

      .service-header {
        font-weight: 600;
        font-size: 14px;
        color: $dark;
        padding: 18px 12px;
        border-bottom: 1px solid $border;

        .service-header-content {
          display: flex;
          align-items: center;
          justify-content: space-between;
          width: 100%;

          .service-name-section {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;

            .expand-icon {
              font-size: 18px;
              color: $orange;
              flex-shrink: 0;
              transition: transform 0.2s ease;
            }
          }
        }

        .instance-number {
          margin-left: 6px;
          font-weight: 400;
          color: $gray;
          font-size: 12px;
        }
      }
    }

    // Field row styling with separator lines
    &.field-row {
      background: $white;

      td {
        border-bottom: 1px solid var(--color-border-default);
      }

      &:last-child td {
        border-bottom: none;
      }

      @media (hover: hover) and (pointer: fine) {
        &:hover {
          background: rgba(241, 90, 39, 0.02);
        }
      }
    }
  }

  .field-label-cell {
    width: 30%;
    font-weight: 600;
    font-size: 13px;
    color: $dark;
  }

  .field-value-cell {
    width: 70%;

    .deliverable-input {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid $border;
      border-radius: 4px;
      font-size: 13px;
      background: $white;
      color: $dark;
      font-family: inherit;

      &:focus {
        outline: none;
      }

      &:disabled, &:read-only {
        background: $light-gray;
        color: $gray;
        cursor: not-allowed;
      }

      &::placeholder {
        color: var(--color-text-muted);
      }
    }

    .deliverable-select {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid $border;
      border-radius: 4px;
      font-size: 13px;
      background: $white;
      color: $dark;
      font-family: inherit;
      cursor: pointer;
      text-align: center;

      &:focus {
        outline: none;
      }

      &:disabled {
        background: $light-gray;
        color: $gray;
        cursor: not-allowed;
      }

      option {
        padding: 8px;
      }
    }

    .deliverable-textarea {
      width: 100%;
      min-height: 60px;
      padding: 8px 10px;
      border: 1px solid $border;
      border-radius: 4px;
      font-size: 13px;
      background: $white;
      color: $dark;
      font-family: inherit;
      line-height: 1.4;
      resize: vertical;

      &:focus {
        outline: none;
      }

      &:disabled, &:read-only {
        background: $light-gray;
        color: $gray;
        cursor: not-allowed;
      }

      &::placeholder {
        color: var(--color-text-muted);
      }
    }

    .status-display {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 500;
      color: $dark;
      background: $light-gray;
      border-radius: 4px;
    }

    &.deliverable-file-cell {
      text-align: center;
      vertical-align: middle;

      .file-upload-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
        flex-wrap: wrap;
        width: 100%;
        margin: 0 auto;

        .deliverable-actions {
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 4px;
        }

        > div {
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .deliverable-link {
          color: $orange;
          text-decoration: none;
          font-weight: 500;
          font-size: 13px;
          display: inline-flex;
          align-items: center;
          gap: 4px;
          padding: 4px 8px;
          border-radius: 4px;
          transition: background 0.2s ease;

          @media (hover: hover) and (pointer: fine) {
            &:hover {
              background: rgba(241, 90, 39, 0.1);
            }
          }
        }

        ion-button {
          --padding-start: 4px;
          --padding-end: 4px;
          height: 32px;
          width: 32px;
          margin: 0;

          ion-icon {
            font-size: 20px;
          }

          // Upload button has text â€” don't constrain width
          &[title="Upload"] {
            width: auto;
            --padding-start: 8px;
            --padding-end: 12px;
          }
        }
      }
    }
  }

  // Mobile responsive styles
  @media (max-width: 768px) {
    .field-label-cell {
      width: 35%;
      font-size: 12px;
      padding: 10px 8px;
    }

    .field-value-cell {
      width: 65%;
      padding: 10px 8px;

      .deliverable-select,
      .deliverable-textarea,
      .deliverable-input {
        font-size: 14px;
        padding: 10px;
      }

      .deliverable-textarea {
        min-height: 80px;
      }
    }

    .deliverable-row {
      td {
        padding: 10px 8px;
      }

      &.service-row {
        .service-header {
          font-size: 13px;
          padding: 10px 8px;
        }
      }
    }

    &.deliverable-file-cell {
      .file-upload-container {
        gap: 6px;

        ion-button {
          height: 36px;
          width: 36px;

          ion-icon {
            font-size: 22px;
          }
        }
      }
    }
  }
}

// G2-NAV-002: Breadcrumb Navigation (web only)
.breadcrumb-footer {
  ion-toolbar {
    --background: var(--color-bg-card);
    --color: var(--color-text-primary);
    --border-width: 1px 0 0 0;
    --border-color: var(--color-border-default);
    --padding-top: 8px;
    --padding-bottom: 8px;
    --min-height: 48px;
  }
}

.breadcrumb-container {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0 16px;
  overflow-x: auto;
  white-space: nowrap;

  // Hide scrollbar
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.breadcrumb-item {
  display: flex;
  align-items: center;
  cursor: pointer;
  color: var(--color-text-secondary);
  font-size: 14px;
  font-weight: 500;
  padding: 4px 8px;
  border-radius: 4px;
  flex-shrink: 0;

  // Only apply hover effects on devices with hover capability (desktop)
  @media (hover: hover) and (pointer: fine) {
    &:hover {
      background-color: var(--color-shadow);
      color: var(--color-text-primary);
    }
  }

  &.active {
    color: var(--color-text-primary);
    cursor: default;
    font-weight: 700;

    // Only apply hover effects on devices with hover capability (desktop)
    @media (hover: hover) and (pointer: fine) {
      &:hover {
        background-color: transparent;
      }
    }
  }

  ion-icon {
    font-size: 20px;
  }

  // Mobile: show icons only
  .breadcrumb-icon-mobile {
    display: block;
    font-size: 20px;
  }

  .breadcrumb-text-desktop {
    display: none;
  }
}

.breadcrumb-arrow {
  color: var(--color-text-muted);
  font-size: 16px;
  flex-shrink: 0;
}

// Desktop breadcrumbs: show text instead of icons
@media (min-width: 768px) {
  .breadcrumb-item {
    .breadcrumb-icon-mobile {
      display: none !important;
    }

    .breadcrumb-text-desktop {
      display: inline !important;
    }
  }
}

// Edit Address Alert styling
::ng-deep .edit-address-alert {
  .alert-wrapper {
    padding-top: 0 !important;
  }

  .alert-head {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px 24px;
  }

  .alert-message {
    padding-top: 16px !important;
  }

  .edit-address-form {
    .form-field {
      margin-bottom: 16px;

      &:first-child {
        margin-top: 16px;
      }

      label {
        display: block;
        text-align: left;
        font-size: 13px;
        font-weight: 600;
        color: var(--color-text-primary);
        margin-bottom: 6px;
      }

      input, select {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid var(--color-border-default);
        border-radius: 6px;
        font-size: 14px;
        background: var(--color-bg-card);
        color: var(--color-text-primary);
        box-sizing: border-box;

        &:focus {
          outline: none;
          border-color: $orange;
        }

        &::placeholder {
          color: var(--color-text-muted);
        }
      }

      select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center;
        padding-right: 36px;
      }
    }
  }

  .alert-button-group {
    padding: 12px 24px 20px;
    gap: 12px;
    display: flex;
    justify-content: stretch;

    .alert-button {
      flex: 1 1 0;
      background: var(--color-bg-page);
      color: var(--color-text-primary);
      border: 2px solid $orange;
      border-radius: 999px;
      font-weight: 600;
      font-size: 14px;
      padding: 13px 0;
      text-transform: none;
      display: flex;
      align-items: center;
      justify-content: center;

      .alert-button-inner {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
  }
}
