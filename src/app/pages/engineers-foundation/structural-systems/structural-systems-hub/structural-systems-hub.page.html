<div class="page-container">
  <div class="content-section">
    <!-- STANDARDIZED LOADING STATES -->
    
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Loading categories...</p>
    </div>

    <!-- Data Syncing Indicator -->
    <div class="sync-indicator" *ngIf="hasPendingSync && !loading">
      <ion-icon name="sync-outline" class="rotating"></ion-icon>
      <span>Syncing structural data...</span>
    </div>

    <!-- Visual Assessment Location Question -->
    <div *ngIf="!loading" class="visual-location-section">
      <div class="form-group" [class.filled]="serviceData.StructStat">
        <label>
          Where will you provide the Visuals<span class="required">*</span>
        </label>
        <select
          [(ngModel)]="serviceData.StructStat"
          (ngModelChange)="onStructuralSystemsStatusChange($event)"
          class="styled-input">
          <option value="">-- Select --</option>
          <option value="Provided in Property Inspection Report">Provided in Property Inspection Report</option>
          <option value="Completed Here">Completed Here</option>
        </select>
      </div>
    </div>

    <!-- Disabled State -->
    <div *ngIf="!loading && isStructuralSystemsDisabled()" class="disabled-message">
      <ion-icon name="information-circle-outline"></ion-icon>
      <p>Structural Systems assessment is provided in Home Inspection Report</p>
    </div>

    <!-- Categories List -->
    <div *ngIf="!loading && serviceData.StructStat === 'Completed Here' && categories.length > 0" class="categories-container">
      <ion-card
        *ngFor="let category of categories"
        class="navigation-card"
        button="true"
        (click)="navigateToCategory(category.name)">
        <ion-card-header>
          <div class="card-header-content">
            <div class="icon-container">
              <ion-icon [name]="getCategoryIcon(category.name)"></ion-icon>
            </div>
            <div class="title-container">
              <ion-card-title>{{ category.name }}</ion-card-title>
              <p class="deficiency-count" *ngIf="category.deficiencyCount > 0">
                {{ category.deficiencyCount }} {{ category.deficiencyCount === 1 ? 'Defect' : 'Defects' }}
              </p>
            </div>
          </div>
        </ion-card-header>
      </ion-card>
    </div>

    <!-- Empty Offline State -->
    <div *ngIf="!loading && serviceData.StructStat === 'Completed Here' && categories.length === 0 && !isOnline" class="empty-offline">
      <ion-icon name="cloud-offline-outline"></ion-icon>
      <p>You're offline</p>
      <p class="empty-subtitle">Connect to internet to sync category data</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && serviceData.StructStat === 'Completed Here' && categories.length === 0 && isOnline" class="empty-message">
      <ion-icon name="folder-open-outline"></ion-icon>
      <p>No categories available</p>
    </div>
  </div>
</div>
