<div class="page-container">
  <div class="header-section">
    <ion-button fill="clear" (click)="goBack()">
      <ion-icon slot="start" name="arrow-back"></ion-icon>
      Back
    </ion-button>
    <h1>Structural Systems</h1>
    <p class="subtitle">Visual assessment categories</p>
  </div>

  <div class="content-section">
    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Loading categories...</p>
    </div>

    <!-- Disabled State -->
    <div *ngIf="!loading && isStructuralSystemsDisabled()" class="disabled-message">
      <ion-icon name="information-circle-outline"></ion-icon>
      <p>Structural Systems assessment is provided in Home Inspection Report</p>
    </div>

    <!-- Categories List -->
    <div *ngIf="!loading && !isStructuralSystemsDisabled() && categories.length > 0" class="categories-container">
      <ion-card
        *ngFor="let category of categories"
        class="navigation-card"
        button="true"
        (click)="navigateToCategory(category.name)">
        <ion-card-header>
          <div class="card-header-content">
            <div class="icon-container">
              <ion-icon name="construct-outline"></ion-icon>
            </div>
            <div class="title-container">
              <ion-card-title>{{ category.name }}</ion-card-title>
              <ion-badge *ngIf="category.deficiencyCount > 0" color="warning">
                {{ category.deficiencyCount }} {{ category.deficiencyCount === 1 ? 'deficiency' : 'deficiencies' }}
              </ion-badge>
            </div>
          </div>
        </ion-card-header>

        <ion-card-content>
          <p>Visual assessment items</p>
          <div class="card-footer">
            <ion-icon name="chevron-forward-outline"></ion-icon>
          </div>
        </ion-card-content>
      </ion-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !isStructuralSystemsDisabled() && categories.length === 0" class="empty-message">
      <ion-icon name="folder-open-outline"></ion-icon>
      <p>No categories available</p>
    </div>
  </div>
</div>
