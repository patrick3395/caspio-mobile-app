<!-- Upload Progress Overlay (Web Only) - G2-LOADING-003 -->
<div *ngIf="isWeb && hasActiveUploads" class="upload-progress-container">
  <!-- Individual upload progress items -->
  <div
    *ngFor="let upload of activeUploads; trackBy: trackByUploadId"
    class="upload-progress-item"
    [class.completed]="upload.stage === 'complete'"
    [class.error]="upload.stage === 'error'"
  >
    <div class="upload-progress-header">
      <span class="upload-progress-filename">{{ upload.fileName }}</span>
      <span class="upload-progress-percent">{{ upload.progress }}%</span>
    </div>
    <div class="upload-progress-bar">
      <div
        class="upload-progress-bar-fill"
        [style.width.%]="upload.progress"
      ></div>
    </div>
    <div class="upload-progress-stage">{{ getStageLabel(upload.stage) }}</div>
  </div>

  <!-- Batch upload queue progress -->
  <div *ngIf="queueStatus && queueStatus.totalTasks > 0" class="upload-progress-item batch-item">
    <div class="upload-progress-header">
      <span class="upload-progress-filename">
        <ion-icon name="images-outline"></ion-icon>
        Photo Queue
      </span>
      <span class="upload-progress-percent">{{ queueStatus.completedTasks }}/{{ queueStatus.totalTasks }}</span>
    </div>
    <div class="upload-progress-bar">
      <div
        class="upload-progress-bar-fill"
        [style.width.%]="getQueuePercentage()"
      ></div>
    </div>
    <div class="upload-progress-stage">
      <span *ngIf="queueStatus.activeTasks > 0">
        Uploading {{ queueStatus.activeTasks }} photo{{ queueStatus.activeTasks > 1 ? 's' : '' }}...
      </span>
      <span *ngIf="queueStatus.queuedTasks > 0">
        {{ queueStatus.queuedTasks }} queued
      </span>
      <span *ngIf="queueStatus.failedTasks > 0" class="error-text">
        {{ queueStatus.failedTasks }} failed
      </span>
    </div>
  </div>
</div>
